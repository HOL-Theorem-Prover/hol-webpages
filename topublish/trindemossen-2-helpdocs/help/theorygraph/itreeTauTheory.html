<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head><link rel="icon" href="../../../images/logo.ico" type="image/vnd.microsoft.icon"><title>Theory: itreeTau</title><meta http-equiv="content-type" content="text/html;charset=UTF-8">
<style type="text/css">
<!--
  body {background: #faf0e6; color: #191970; }
  span.freevar  { color: blue}
  span.boundvar { color: green}
  span.typevar  { color: purple}
  span.type     { color: teal}
  span.strong   { color: black; font-weight: bold}
  span.vstrong  { color: black; 
                  font-weight: bold;
                  font-size: larger}
  h1 {color: black}
  th {color: crimson}
-->
</style>
</head>
<body>
<h1>Theory "itreeTau"</h1>
<span class="vstrong">Parents</span>&nbsp;&nbsp;&nbsp;&nbsp;
    <a href = "alistTheory.html"><span class="strong">alist</span></a>&nbsp;&nbsp;
    <a href = "llistTheory.html"><span class="strong">llist</span></a>&nbsp;&nbsp;
    <a href = "itreeTheory.html"><span class="strong">itree</span></a>&nbsp;&nbsp;
    <a href = "companionTheory.html"><span class="strong">companion</span></a>

<h1>Signature</h1>
<center>
    <table BORDER=4 CELLPADDING=10 CELLSPACING=1>
    
    <tr> <th> Type <th> Arity<tr><td> <span class="strong">itree</span> <td> 3
    <tr><td> <span class="strong">itree_el</span> <td> 2
    <tr><td> <span class="strong">itree_next</span> <td> 4
    <tr> <th> Constant <th> Type<tr><td>
    <span class="strong">Event</span>
    <td>
    :Îµ -> (Îµ, Ï‚) itree_el
    <tr><td> <span class="strong">Ret</span> <td> :Î³ -> (Î±, Î², Î³) itree
    <tr><td>
    <span class="strong">Ret'</span>
    <td>
    :Ï‚ -> (Î±, Îµ, Ï‚, 'seed) itree_next
    <tr><td>
    <span class="strong">Ret_rep</span>
    <td>
    :Ï‚ -> Î± list -> (Î², Ï‚) itree_el
    <tr><td> <span class="strong">Return</span> <td> :Ï‚ -> (Îµ, Ï‚) itree_el
    <tr><td> <span class="strong">Silence</span> <td> :(Îµ, Ï‚) itree_el
    <tr><td>
    <span class="strong">Tau</span>
    <td>
    :(Î±, Î², Î³) itree -> (Î±, Î², Î³) itree
    <tr><td>
    <span class="strong">Tau'</span>
    <td>
    :'seed -> (Î±, Îµ, Ï‚, 'seed) itree_next
    <tr><td>
    <span class="strong">Tau_rep</span>
    <td>
    :(Î± option list -> (Îµ, Ï‚) itree_el) -> Î± option list -> (Îµ, Ï‚) itree_el
    <tr><td>
    <span class="strong">Vis</span>
    <td>
    :Î² -> (Î± -> (Î±, Î², Î³) itree) -> (Î±, Î², Î³) itree
    <tr><td>
    <span class="strong">Vis'</span>
    <td>
    :Îµ -> (Î± -> 'seed) -> (Î±, Îµ, Ï‚, 'seed) itree_next
    <tr><td>
    <span class="strong">Vis_rep</span>
    <td>
    :Î² ->
    (Î± -> Î± option list -> (Î², Î³) itree_el) ->
    Î± option list -> (Î², Î³) itree_el
    <tr><td>
    <span class="strong">after_taus</span>
    <td>
    :((Î±, Î², Î³) itree -> (Î´, Îµ, Î¶) itree -> bool) ->
    (Î±, Î², Î³) itree -> (Î´, Îµ, Î¶) itree -> bool
    <tr><td>
    <span class="strong">itree_CASE</span>
    <td>
    :(Î±, Îµ, Ï‚) itree ->
    (Ï‚ -> Î²) ->
    ((Î±, Îµ, Ï‚) itree -> Î²) -> (Îµ -> (Î± -> (Î±, Îµ, Ï‚) itree) -> Î²) -> Î²
    <tr><td>
    <span class="strong">itree_abs</span>
    <td>
    :(Î± option list -> (Îµ, Ï‚) itree_el) -> (Î±, Îµ, Ï‚) itree
    <tr><td>
    <span class="strong">itree_bind</span>
    <td>
    :(Î±, Î², Î´) itree -> (Î´ -> (Î±, Î², Î³) itree) -> (Î±, Î², Î³) itree
    <tr><td>
    <span class="strong">itree_el</span>
    <td>
    :(Î³, Î±, Î²) itree -> Î³ option list -> (Î±, Î²) itree_el
    <tr><td>
    <span class="strong">itree_el_CASE</span>
    <td>
    :(Îµ, Ï‚) itree_el -> (Îµ -> Î±) -> (Ï‚ -> Î±) -> Î± -> Î±
    <tr><td>
    <span class="strong">itree_el_size</span>
    <td>
    :(Îµ -> num) -> (Ï‚ -> num) -> (Îµ, Ï‚) itree_el -> num
    <tr><td>
    <span class="strong">itree_iter</span>
    <td>
    :(Î´ -> (Î±, Î², Î´ + Î³) itree) -> Î´ -> (Î±, Î², Î³) itree
    <tr><td>
    <span class="strong">itree_loop</span>
    <td>
    :(Î´ + Îµ -> (Î±, Î², Î´ + Î³) itree) -> Îµ -> (Î±, Î², Î³) itree
    <tr><td>
    <span class="strong">itree_next_CASE</span>
    <td>
    :(Î±, Îµ, Ï‚, 'seed) itree_next ->
    (Ï‚ -> Î²) -> ('seed -> Î²) -> (Îµ -> (Î± -> 'seed) -> Î²) -> Î²
    <tr><td>
    <span class="strong">itree_next_size</span>
    <td>
    :(Î± -> num) ->
    (Îµ -> num) ->
    (Ï‚ -> num) -> ('seed -> num) -> (Î±, Îµ, Ï‚, 'seed) itree_next -> num
    <tr><td>
    <span class="strong">itree_rep</span>
    <td>
    :(Î±, Îµ, Ï‚) itree -> Î± option list -> (Îµ, Ï‚) itree_el
    <tr><td>
    <span class="strong">itree_rep_ok</span>
    <td>
    :(Î± option list -> (Îµ, Ï‚) itree_el) -> bool
    <tr><td>
    <span class="strong">itree_unfold</span>
    <td>
    :(Î´ -> (Î±, Î², Î³, Î´) itree_next) -> Î´ -> (Î±, Î², Î³) itree
    <tr><td>
    <span class="strong">itree_unfold_path</span>
    <td>
    :(Î³ -> (Î´, Î±, Î², Î³) itree_next) -> Î³ -> Î´ option list -> (Î±, Î²) itree_el
    <tr><td>
    <span class="strong">itree_wbisim</span>
    <td>
    :(Î±, Î², Î³) itree -> (Î±, Î², Î³) itree -> bool
    <tr><td>
    <span class="strong">path_ok</span>
    <td>
    :Î± option list -> (Î± option list -> (Îµ, Ï‚) itree_el) -> bool
    <tr><td> <span class="strong">spin</span> <td> :(Î±, Î², Î³) itree
    <tr><td>
    <span class="strong">strip_tau</span>
    <td>
    :(Î±, Î², Î³) itree -> (Î±, Î², Î³) itree -> bool
    <tr><td>
    <span class="strong">untau</span>
    <td>
    :(Î±, Î², Î³) itree -> (Î±, Î², Î³) itree$itree
    <tr><td>
    <span class="strong">upto_taus_func</span>
    <td>
    :((Î±, Î², Î³) itree # (Î´, Îµ, Î¶) itree -> bool) ->
    (Î±, Î², Î³) itree # (Î´, Îµ, Î¶) itree -> bool
    <tr><td>
    <span class="strong">wbisim_functional</span>
    <td>
    :((Î±, Î², Î³) itree # (Î±, Î², Î³) itree -> bool) ->
    (Î±, Î², Î³) itree # (Î±, Î², Î³) itree -> bool
    
</table>
</center>

<h1>Definitions</h1>
<DL>
<DT><span class="strong">@tempafter_taus_def</span>
<DD>
<pre>
âŠ¢ after_taus =
  (Î»R a0 a1.
       âˆ€after_taus'.
         (âˆ€a0 a1.
            R a0 a1 âˆ¨ (âˆƒx. a0 = Tau x âˆ§ after_taus' x a1) âˆ¨
            (âˆƒy. a1 = Tau y âˆ§ after_taus' a0 y) â‡’
            after_taus' a0 a1) â‡’
         after_taus' a0 a1)
</pre>

<DT><span class="strong">@tempitree_wbisim_def</span>
<DD>
<pre>
âŠ¢ itree_wbisim =
  (Î»a0 a1.
       âˆƒitree_wbisim'.
         itree_wbisim' a0 a1 âˆ§
         âˆ€a0 a1.
           itree_wbisim' a0 a1 â‡’
           (âˆƒt t'. a0 = Tau t âˆ§ a1 = Tau t' âˆ§ itree_wbisim' t t') âˆ¨
           (âˆƒe k k'.
              strip_tau a0 (Vis e k) âˆ§ strip_tau a1 (Vis e k') âˆ§
              âˆ€r. itree_wbisim' (k r) (k' r)) âˆ¨
           âˆƒr. strip_tau a0 (Ret r) âˆ§ strip_tau a1 (Ret r))
</pre>

<DT><span class="strong">@tempstrip_tau_def</span>
<DD>
<pre>
âŠ¢ strip_tau =
  (Î»a0 a1.
       âˆ€strip_tau'.
         (âˆ€a0 a1.
            (âˆƒt. a0 = Tau t âˆ§ strip_tau' t a1) âˆ¨
            (âˆƒe k. a0 = Vis e k âˆ§ a1 = Vis e k) âˆ¨
            (âˆƒv. a0 = Ret v âˆ§ a1 = Ret v) â‡’
            strip_tau' a0 a1) â‡’
         strip_tau' a0 a1)
</pre>

<DT><span class="strong">itree_TY_DEF</span>
<DD>
<pre>
âŠ¢ âˆƒrep. TYPE_DEFINITION itree_rep_ok rep
</pre>

<DT><span class="strong">itree_bind_def</span>
<DD>
<pre>
âŠ¢ âˆ€t k.
    itree_bind t k =
    itree_unfold
      (Î»x.
           case x of
             INL (Ret r) =>
               (case k r of
                  Ret s => Ret' s
                | Tau t => Tau' (INR t)
                | Vis e g => Vis' e (INR âˆ˜ g))
           | INL (Tau t) => Tau' (INL t)
           | INL (Vis e g) => Vis' e (INL âˆ˜ g)
           | INR (Ret r') => Ret' r'
           | INR (Tau t') => Tau' (INR t')
           | INR (Vis e' g') => Vis' e' (INR âˆ˜ g')) (INL t)
</pre>

<DT><span class="strong">itree_el_case_def</span>
<DD>
<pre>
âŠ¢ (âˆ€a f f1 v. itree_el_CASE (Event a) f f1 v = f a) âˆ§
  (âˆ€a f f1 v. itree_el_CASE (Return a) f f1 v = f1 a) âˆ§
  âˆ€f f1 v. itree_el_CASE Silence f f1 v = v
</pre>

<DT><span class="strong">itree_el_size_def</span>
<DD>
<pre>
âŠ¢ (âˆ€f f1 a. itree_el_size f f1 (Event a) = 1 + f a) âˆ§
  (âˆ€f f1 a. itree_el_size f f1 (Return a) = 1 + f1 a) âˆ§
  âˆ€f f1. itree_el_size f f1 Silence = 0
</pre>

<DT><span class="strong">itree_iter_def</span>
<DD>
<pre>
âŠ¢ âˆ€body seed.
    itree_iter body seed =
    itree_unfold
      (Î»x.
           case x of
             Ret (INL seed') => Tau' (body seed')
           | Ret (INR v) => Ret' v
           | Tau u => Tau' u
           | Vis e g => Vis' e g) (body seed)
</pre>

<DT><span class="strong">itree_loop_def</span>
<DD>
<pre>
âŠ¢ âˆ€body seed.
    itree_loop body seed =
    itree_iter
      (Î»x.
           itree_bind (body x)
             (Î»cb.
                  case cb of INL c => Ret (INL (INL c)) | INR b => Ret (INR b)))
      (INR seed)
</pre>

<DT><span class="strong">itree_next_case_def</span>
<DD>
<pre>
âŠ¢ (âˆ€a f f1 f2. itree_next_CASE (Ret' a) f f1 f2 = f a) âˆ§
  (âˆ€a f f1 f2. itree_next_CASE (Tau' a) f f1 f2 = f1 a) âˆ§
  âˆ€a0 a1 f f1 f2. itree_next_CASE (Vis' a0 a1) f f1 f2 = f2 a0 a1
</pre>

<DT><span class="strong">itree_next_size_def</span>
<DD>
<pre>
âŠ¢ (âˆ€f f1 f2 f3 a. itree_next_size f f1 f2 f3 (Ret' a) = 1 + f2 a) âˆ§
  (âˆ€f f1 f2 f3 a. itree_next_size f f1 f2 f3 (Tau' a) = 1 + f3 a) âˆ§
  âˆ€f f1 f2 f3 a0 a1. itree_next_size f f1 f2 f3 (Vis' a0 a1) = 1 + f1 a0
</pre>

<DT><span class="strong">untau_def</span>
<DD>
<pre>
âŠ¢ untau =
  itree_unfold
    (Î»t.
         case some t'. strip_tau t t' of
           NONE => Div'
         | SOME (Ret v) => Ret' v
         | SOME (Tau t') => Div'
         | SOME (Vis e k) => Vis' e k)
</pre>

<DT><span class="strong">upto_taus_func_def</span>
<DD>
<pre>
âŠ¢ âˆ€R. upto_taus_func R = R âˆª rel_to_reln (after_taus (reln_to_rel R))
</pre>

<DT><span class="strong">wbisim_functional_def</span>
<DD>
<pre>
âŠ¢ âˆ€R. wbisim_functional R =
      {(t,t') | âˆƒr. strip_tau t (Ret r) âˆ§ strip_tau t' (Ret r)} âˆª
      {(t,t') |
       âˆƒe k k'.
         strip_tau t (Vis e k) âˆ§ strip_tau t' (Vis e k') âˆ§ âˆ€r. (k r,k' r) âˆˆ R} âˆª
      {(Tau t,Tau t') | (t,t') âˆˆ R}
</pre>

</DL>


<hr>

<hr>
<h1>Theorems</h1>
<DL>
<DT><span class="strong">FUNPOW_Tau_Ret_eq</span>
<DD>
<pre>
âŠ¢ FUNPOW Tau n (Ret x) = FUNPOW Tau m (Ret y) â‡’ n = m âˆ§ x = y
</pre>

<DT><span class="strong">FUNPOW_Tau_Vis_eq</span>
<DD>
<pre>
âŠ¢ FUNPOW Tau n (Vis a g) = FUNPOW Tau m (Vis e k) â‡’ n = m âˆ§ a = e âˆ§ g = k
</pre>

<DT><span class="strong">FUNPOW_Tau_bind</span>
<DD>
<pre>
âŠ¢ itree_bind (FUNPOW Tau n t) g = FUNPOW Tau n (itree_bind t g)
</pre>

<DT><span class="strong">FUNPOW_Tau_imp_wbisim</span>
<DD>
<pre>
âŠ¢ t = FUNPOW Tau n t' â‡’ itree_wbisim t t'
</pre>

<DT><span class="strong">FUNPOW_Tau_neq</span>
<DD>
<pre>
âŠ¢ Ret x â‰  FUNPOW Tau n (Vis a g) âˆ§ Vis a g â‰  FUNPOW Tau n (Ret x)
</pre>

<DT><span class="strong">FUNPOW_Tau_neq2</span>
<DD>
<pre>
âŠ¢ FUNPOW Tau n' (Ret x) â‰  FUNPOW Tau n (Vis a g)
</pre>

<DT><span class="strong">FUNPOW_Tau_wbisim</span>
<DD>
<pre>
âŠ¢ itree_wbisim (FUNPOW Tau n x) x
</pre>

<DT><span class="strong">FUNPOW_Tau_wbisim_intro</span>
<DD>
<pre>
âŠ¢ itree_wbisim x y â‡’ itree_wbisim (FUNPOW Tau n x) (FUNPOW Tau n' y)
</pre>

<DT><span class="strong">Ret_11</span>
<DD>
<pre>
âŠ¢ âˆ€x y. Ret x = Ret y â‡” x = y
</pre>

<DT><span class="strong">Tau_11</span>
<DD>
<pre>
âŠ¢ âˆ€x y. Tau x = Tau y â‡” x = y
</pre>

<DT><span class="strong">Tau_INJ</span>
<DD>
<pre>
âŠ¢ INJ Tau ğ•Œ(:(Î±, Î², Î³) itree) ğ•Œ(:(Î±, Î², Î³) itree)
</pre>

<DT><span class="strong">Vis_11</span>
<DD>
<pre>
âŠ¢ âˆ€x f y g. Vis x f = Vis y g â‡” x = y âˆ§ f = g
</pre>

<DT><span class="strong">after_taus_cases</span>
<DD>
<pre>
âŠ¢ âˆ€R a0 a1.
    after_taus R a0 a1 â‡”
    R a0 a1 âˆ¨ (âˆƒx. a0 = Tau x âˆ§ after_taus R x a1) âˆ¨
    âˆƒy. a1 = Tau y âˆ§ after_taus R a0 y
</pre>

<DT><span class="strong">after_taus_ind</span>
<DD>
<pre>
âŠ¢ âˆ€R after_taus'.
    (âˆ€x y. R x y â‡’ after_taus' x y) âˆ§
    (âˆ€x y. after_taus' x y â‡’ after_taus' (Tau x) y) âˆ§
    (âˆ€x y. after_taus' x y â‡’ after_taus' x (Tau y)) â‡’
    âˆ€a0 a1. after_taus R a0 a1 â‡’ after_taus' a0 a1
</pre>

<DT><span class="strong">after_taus_rel</span>
<DD>
<pre>
âŠ¢ âˆ€R x y. R x y â‡’ after_taus R x y
</pre>

<DT><span class="strong">after_taus_rules</span>
<DD>
<pre>
âŠ¢ âˆ€R. (âˆ€x y. R x y â‡’ after_taus R x y) âˆ§
      (âˆ€x y. after_taus R x y â‡’ after_taus R (Tau x) y) âˆ§
      âˆ€x y. after_taus R x y â‡’ after_taus R x (Tau y)
</pre>

<DT><span class="strong">after_taus_strongind</span>
<DD>
<pre>
âŠ¢ âˆ€R after_taus'.
    (âˆ€x y. R x y â‡’ after_taus' x y) âˆ§
    (âˆ€x y. after_taus R x y âˆ§ after_taus' x y â‡’ after_taus' (Tau x) y) âˆ§
    (âˆ€x y. after_taus R x y âˆ§ after_taus' x y â‡’ after_taus' x (Tau y)) â‡’
    âˆ€a0 a1. after_taus R a0 a1 â‡’ after_taus' a0 a1
</pre>

<DT><span class="strong">after_taus_tauL</span>
<DD>
<pre>
âŠ¢ âˆ€R x y. after_taus R x y â‡’ after_taus R (Tau x) y
</pre>

<DT><span class="strong">after_taus_tauR</span>
<DD>
<pre>
âŠ¢ âˆ€R x y. after_taus R x y â‡’ after_taus R x (Tau y)
</pre>

<DT><span class="strong">datatype_itree</span>
<DD>
<pre>
âŠ¢ DATATYPE (itree Ret Tau Vis)
</pre>

<DT><span class="strong">datatype_itree_el</span>
<DD>
<pre>
âŠ¢ DATATYPE (itree_el Event Return Silence)
</pre>

<DT><span class="strong">datatype_itree_next</span>
<DD>
<pre>
âŠ¢ DATATYPE (itree_next Ret' Tau' Vis')
</pre>

<DT><span class="strong">itree_11</span>
<DD>
<pre>
âŠ¢ (âˆ€x y. Ret x = Ret y â‡” x = y) âˆ§ (âˆ€x y. Tau x = Tau y â‡” x = y) âˆ§
  âˆ€x f y g. Vis x f = Vis y g â‡” x = y âˆ§ f = g
</pre>

<DT><span class="strong">itree_CASE</span>
<DD>
<pre>
âŠ¢ itree_CASE (Ret r) ret tau vis = ret r âˆ§
  itree_CASE (Tau t) ret tau vis = tau t âˆ§
  itree_CASE (Vis a g) ret tau vis = vis a g
</pre>

<DT><span class="strong">itree_CASE_cong</span>
<DD>
<pre>
âŠ¢ âˆ€M M' ret tau vis ret' tau' vis'.
    M = M' âˆ§ (âˆ€x. M' = Ret x â‡’ ret x = ret' x) âˆ§
    (âˆ€t. M' = Tau t â‡’ tau t = tau' t) âˆ§
    (âˆ€a g. M' = Vis a g â‡’ vis a g = vis' a g) â‡’
    itree_CASE M ret tau vis = itree_CASE M' ret' tau' vis'
</pre>

<DT><span class="strong">itree_CASE_elim</span>
<DD>
<pre>
âŠ¢ âˆ€f. f (itree_CASE t ret tau vis) â‡”
      (âˆƒr. t = Ret r âˆ§ f (ret r)) âˆ¨ (âˆƒu. t = Tau u âˆ§ f (tau u)) âˆ¨
      âˆƒa g. t = Vis a g âˆ§ f (vis a g)
</pre>

<DT><span class="strong">itree_CASE_eq</span>
<DD>
<pre>
âŠ¢ itree_CASE t ret tau vis = v â‡”
  (âˆƒr. t = Ret r âˆ§ ret r = v) âˆ¨ (âˆƒu. t = Tau u âˆ§ tau u = v) âˆ¨
  âˆƒa g. t = Vis a g âˆ§ vis a g = v
</pre>

<DT><span class="strong">itree_bind_assoc</span>
<DD>
<pre>
âŠ¢ itree_bind (itree_bind t k) k' = itree_bind t (Î»x. itree_bind (k x) k')
</pre>

<DT><span class="strong">itree_bind_resp_k_wbisim</span>
<DD>
<pre>
âŠ¢ âˆ€t k1 k2.
    (âˆ€r. itree_wbisim (k1 r) (k2 r)) â‡’
    itree_wbisim (itree_bind t k1) (itree_bind t k2)
</pre>

<DT><span class="strong">itree_bind_resp_t_wbisim</span>
<DD>
<pre>
âŠ¢ âˆ€a b k. itree_wbisim a b â‡’ itree_wbisim (itree_bind a k) (itree_bind b k)
</pre>

<DT><span class="strong">itree_bind_resp_wbisim</span>
<DD>
<pre>
âŠ¢ âˆ€a b k1 k2.
    itree_wbisim a b âˆ§ (âˆ€r. itree_wbisim (k1 r) (k2 r)) â‡’
    itree_wbisim (itree_bind a k1) (itree_bind b k2)
</pre>

<DT><span class="strong">itree_bind_ret_inv</span>
<DD>
<pre>
âŠ¢ itree_bind t k = Ret r â‡’ âˆƒr'. t = Ret r' âˆ§ k r' = Ret r
</pre>

<DT><span class="strong">itree_bind_right_identity</span>
<DD>
<pre>
âŠ¢ itree_bind t Ret = t
</pre>

<DT><span class="strong">itree_bind_strip_tau_wbisim</span>
<DD>
<pre>
âŠ¢ âˆ€u u' k. strip_tau u u' â‡’ itree_wbisim (itree_bind u k) (itree_bind u' k)
</pre>

<DT><span class="strong">itree_bind_thm</span>
<DD>
<pre>
âŠ¢ itree_bind (Ret r) k = k r âˆ§ itree_bind (Tau t) k = Tau (itree_bind t k) âˆ§
  itree_bind (Vis e k') k = Vis e (Î»x. itree_bind (k' x) k)
</pre>

<DT><span class="strong">itree_bind_vis_strip_tau</span>
<DD>
<pre>
âŠ¢ âˆ€u k k' e.
    strip_tau u (Vis e k') â‡’
    strip_tau (itree_bind u k) (Vis e (Î»x. itree_bind (k' x) k))
</pre>

<DT><span class="strong">itree_bisimulation</span>
<DD>
<pre>
âŠ¢ âˆ€t1 t2.
    t1 = t2 â‡”
    âˆƒR. R t1 t2 âˆ§ (âˆ€x t. R (Ret x) t â‡’ t = Ret x) âˆ§
        (âˆ€u t. R (Tau u) t â‡’ âˆƒv. t = Tau v âˆ§ R u v) âˆ§
        âˆ€a f t. R (Vis a f) t â‡’ âˆƒg. t = Vis a g âˆ§ âˆ€s. R (f s) (g s)
</pre>

<DT><span class="strong">itree_cases</span>
<DD>
<pre>
âŠ¢ âˆ€t. (âˆƒx. t = Ret x) âˆ¨ (âˆƒu. t = Tau u) âˆ¨ âˆƒa g. t = Vis a g
</pre>

<DT><span class="strong">itree_coind_upto_taus</span>
<DD>
<pre>
âŠ¢ âˆ€R. rel_to_reln R âŠ†
      rel_to_reln itree_wbisim âˆª
      wbisim_functional
        (upto_taus_func (rel_to_reln R) âˆª rel_to_reln itree_wbisim) â‡’
      rel_to_reln R âŠ† rel_to_reln itree_wbisim
</pre>

<DT><span class="strong">itree_distinct</span>
<DD>
<pre>
âŠ¢ Ret x â‰  Tau t âˆ§ Ret x â‰  Vis e g âˆ§ Tau t â‰  Vis e g
</pre>

<DT><span class="strong">itree_el_11</span>
<DD>
<pre>
âŠ¢ (âˆ€a a'. Event a = Event a' â‡” a = a') âˆ§ âˆ€a a'. Return a = Return a' â‡” a = a'
</pre>

<DT><span class="strong">itree_el_Axiom</span>
<DD>
<pre>
âŠ¢ âˆ€f0 f1 f2. âˆƒfn.
    (âˆ€a. fn (Event a) = f0 a) âˆ§ (âˆ€a. fn (Return a) = f1 a) âˆ§ fn Silence = f2
</pre>

<DT><span class="strong">itree_el_case_cong</span>
<DD>
<pre>
âŠ¢ âˆ€M M' f f1 v.
    M = M' âˆ§ (âˆ€a. M' = Event a â‡’ f a = f' a) âˆ§
    (âˆ€a. M' = Return a â‡’ f1 a = f1' a) âˆ§ (M' = Silence â‡’ v = v') â‡’
    itree_el_CASE M f f1 v = itree_el_CASE M' f' f1' v'
</pre>

<DT><span class="strong">itree_el_case_eq</span>
<DD>
<pre>
âŠ¢ itree_el_CASE x f f1 v = v' â‡”
  (âˆƒe. x = Event e âˆ§ f e = v') âˆ¨ (âˆƒr. x = Return r âˆ§ f1 r = v') âˆ¨
  x = Silence âˆ§ v = v'
</pre>

<DT><span class="strong">itree_el_def</span>
<DD>
<pre>
âŠ¢ (âˆ€t. itree_el t [] =
       case t of Ret r => Return r | Tau t => Silence | Vis e g => Event e) âˆ§
  (âˆ€t ns.
     itree_el t (NONE::ns) =
     case t of
       Ret r => Silence
     | Tau t' => itree_el t' ns
     | Vis e g => Silence) âˆ§
  âˆ€t ns a.
    itree_el t (SOME a::ns) =
    case t of
      Ret r => Silence
    | Tau t => Silence
    | Vis e g => itree_el (g a) ns
</pre>

<DT><span class="strong">itree_el_distinct</span>
<DD>
<pre>
âŠ¢ (âˆ€a' a. Event a â‰  Return a') âˆ§ (âˆ€a. Event a â‰  Silence) âˆ§
  âˆ€a. Return a â‰  Silence
</pre>

<DT><span class="strong">itree_el_eqv</span>
<DD>
<pre>
âŠ¢ âˆ€t1 t2. t1 = t2 â‡” âˆ€path. itree_el t1 path = itree_el t2 path
</pre>

<DT><span class="strong">itree_el_ind</span>
<DD>
<pre>
âŠ¢ âˆ€P. (âˆ€t. P t []) âˆ§ (âˆ€t ns. (âˆ€t'. P t' ns) â‡’ P t (NONE::ns)) âˆ§
      (âˆ€t a ns. (âˆ€g. P (g a) ns) â‡’ P t (SOME a::ns)) â‡’
      âˆ€v v1. P v v1
</pre>

<DT><span class="strong">itree_el_induction</span>
<DD>
<pre>
âŠ¢ âˆ€P. (âˆ€e. P (Event e)) âˆ§ (âˆ€r. P (Return r)) âˆ§ P Silence â‡’ âˆ€i. P i
</pre>

<DT><span class="strong">itree_el_nchotomy</span>
<DD>
<pre>
âŠ¢ âˆ€ii. (âˆƒe. ii = Event e) âˆ¨ (âˆƒr. ii = Return r) âˆ¨ ii = Silence
</pre>

<DT><span class="strong">itree_el_thm</span>
<DD>
<pre>
âŠ¢ itree_el (Ret r) [] = Return r âˆ§ itree_el (Tau t) [] = Silence âˆ§
  itree_el (Vis e g) [] = Event e âˆ§ itree_el (Ret r) (NONE::ns) = Silence âˆ§
  itree_el (Tau t) (NONE::ns) = itree_el t ns âˆ§
  itree_el (Vis e g) (NONE::ns) = Silence âˆ§
  itree_el (Ret r) (SOME a::ns) = Silence âˆ§
  itree_el (Tau t) (SOME a::ns) = Silence âˆ§
  itree_el (Vis e g) (SOME a::ns) = itree_el (g a) ns
</pre>

<DT><span class="strong">itree_iter_resp_wbisim</span>
<DD>
<pre>
âŠ¢ âˆ€t k1 k2.
    (âˆ€r. itree_wbisim (k1 r) (k2 r)) â‡’
    itree_wbisim (itree_iter k1 t) (itree_iter k2 t)
</pre>

<DT><span class="strong">itree_iter_thm</span>
<DD>
<pre>
âŠ¢ itree_iter body seed =
  itree_bind (body seed)
    (Î»x. case x of INL a => Tau (itree_iter body a) | INR b => Ret b)
</pre>

<DT><span class="strong">itree_next_11</span>
<DD>
<pre>
âŠ¢ (âˆ€a a'. Ret' a = Ret' a' â‡” a = a') âˆ§ (âˆ€a a'. Tau' a = Tau' a' â‡” a = a') âˆ§
  âˆ€a0 a1 a0' a1'. Vis' a0 a1 = Vis' a0' a1' â‡” a0 = a0' âˆ§ a1 = a1'
</pre>

<DT><span class="strong">itree_next_Axiom</span>
<DD>
<pre>
âŠ¢ âˆ€f0 f1 f2. âˆƒfn.
    (âˆ€a. fn (Ret' a) = f0 a) âˆ§ (âˆ€a. fn (Tau' a) = f1 a) âˆ§
    âˆ€a0 a1. fn (Vis' a0 a1) = f2 a0 a1
</pre>

<DT><span class="strong">itree_next_case_cong</span>
<DD>
<pre>
âŠ¢ âˆ€M M' f f1 f2.
    M = M' âˆ§ (âˆ€a. M' = Ret' a â‡’ f a = f' a) âˆ§
    (âˆ€a. M' = Tau' a â‡’ f1 a = f1' a) âˆ§
    (âˆ€a0 a1. M' = Vis' a0 a1 â‡’ f2 a0 a1 = f2' a0 a1) â‡’
    itree_next_CASE M f f1 f2 = itree_next_CASE M' f' f1' f2'
</pre>

<DT><span class="strong">itree_next_case_eq</span>
<DD>
<pre>
âŠ¢ itree_next_CASE x f f1 f2 = v â‡”
  (âˆƒr. x = Ret' r âˆ§ f r = v) âˆ¨ (âˆƒs. x = Tau' s âˆ§ f1 s = v) âˆ¨
  âˆƒe f'. x = Vis' e f' âˆ§ f2 e f' = v
</pre>

<DT><span class="strong">itree_next_distinct</span>
<DD>
<pre>
âŠ¢ (âˆ€a' a. Ret' a â‰  Tau' a') âˆ§ (âˆ€a1 a0 a. Ret' a â‰  Vis' a0 a1) âˆ§
  âˆ€a1 a0 a. Tau' a â‰  Vis' a0 a1
</pre>

<DT><span class="strong">itree_next_induction</span>
<DD>
<pre>
âŠ¢ âˆ€P. (âˆ€r. P (Ret' r)) âˆ§ (âˆ€s. P (Tau' s)) âˆ§ (âˆ€e f. P (Vis' e f)) â‡’ âˆ€i. P i
</pre>

<DT><span class="strong">itree_next_nchotomy</span>
<DD>
<pre>
âŠ¢ âˆ€ii. (âˆƒr. ii = Ret' r) âˆ¨ (âˆƒs. ii = Tau' s) âˆ¨ âˆƒe f. ii = Vis' e f
</pre>

<DT><span class="strong">itree_strong_bisimulation</span>
<DD>
<pre>
âŠ¢ âˆ€t1 t2.
    t1 = t2 â‡”
    âˆƒR. R t1 t2 âˆ§ (âˆ€x t. R (Ret x) t â‡’ t = Ret x) âˆ§
        (âˆ€u t. R (Tau u) t â‡’ âˆƒv. t = Tau v âˆ§ (R u v âˆ¨ u = v)) âˆ§
        âˆ€a f t.
          R (Vis a f) t â‡’ âˆƒg. t = Vis a g âˆ§ âˆ€s. R (f s) (g s) âˆ¨ f s = g s
</pre>

<DT><span class="strong">itree_unfold</span>
<DD>
<pre>
âŠ¢ itree_unfold f seed =
  case f seed of
    Ret' r => Ret r
  | Tau' s => Tau (itree_unfold f s)
  | Vis' e g => Vis e (itree_unfold f âˆ˜ g)
</pre>

<DT><span class="strong">itree_wbisim_Ret_FUNPOW</span>
<DD>
<pre>
âŠ¢ itree_wbisim t (Ret x) â‡’ âˆƒn. t = FUNPOW Tau n (Ret x)
</pre>

<DT><span class="strong">itree_wbisim_Vis_FUNPOW</span>
<DD>
<pre>
âŠ¢ itree_wbisim t (Vis a g) â‡’
  âˆƒn k. t = FUNPOW Tau n (Vis a k) âˆ§ âˆ€r. itree_wbisim (k r) (g r)
</pre>

<DT><span class="strong">itree_wbisim_cases</span>
<DD>
<pre>
âŠ¢ âˆ€a0 a1.
    itree_wbisim a0 a1 â‡”
    (âˆƒt t'. a0 = Tau t âˆ§ a1 = Tau t' âˆ§ itree_wbisim t t') âˆ¨
    (âˆƒe k k'.
       strip_tau a0 (Vis e k) âˆ§ strip_tau a1 (Vis e k') âˆ§
       âˆ€r. itree_wbisim (k r) (k' r)) âˆ¨
    âˆƒr. strip_tau a0 (Ret r) âˆ§ strip_tau a1 (Ret r)
</pre>

<DT><span class="strong">itree_wbisim_coind</span>
<DD>
<pre>
âŠ¢ âˆ€itree_wbisim'.
    (âˆ€a0 a1.
       itree_wbisim' a0 a1 â‡’
       (âˆƒt t'. a0 = Tau t âˆ§ a1 = Tau t' âˆ§ itree_wbisim' t t') âˆ¨
       (âˆƒe k k'.
          strip_tau a0 (Vis e k) âˆ§ strip_tau a1 (Vis e k') âˆ§
          âˆ€r. itree_wbisim' (k r) (k' r)) âˆ¨
       âˆƒr. strip_tau a0 (Ret r) âˆ§ strip_tau a1 (Ret r)) â‡’
    âˆ€a0 a1. itree_wbisim' a0 a1 â‡’ itree_wbisim a0 a1
</pre>

<DT><span class="strong">itree_wbisim_coind_upto</span>
<DD>
<pre>
âŠ¢ âˆ€R. (âˆ€t t'.
         R t t' â‡’
         (âˆƒt2 t3. t = Tau t2 âˆ§ t' = Tau t3 âˆ§ (R t2 t3 âˆ¨ itree_wbisim t2 t3)) âˆ¨
         (âˆƒe k k'.
            strip_tau t (Vis e k) âˆ§ strip_tau t' (Vis e k') âˆ§
            âˆ€r. R (k r) (k' r) âˆ¨ itree_wbisim (k r) (k' r)) âˆ¨
         (âˆƒr. strip_tau t (Ret r) âˆ§ strip_tau t' (Ret r)) âˆ¨ itree_wbisim t t') â‡’
      âˆ€t t'. R t t' â‡’ itree_wbisim t t'
</pre>

<DT><span class="strong">itree_wbisim_coind_upto'</span>
<DD>
<pre>
âŠ¢ âˆ€R. rel_to_reln R âŠ†
      rel_to_reln itree_wbisim âˆª
      wbisim_functional (set_companion wbisim_functional (rel_to_reln R)) â‡’
      rel_to_reln R âŠ† rel_to_reln itree_wbisim
</pre>

<DT><span class="strong">itree_wbisim_refl</span>
<DD>
<pre>
âŠ¢ itree_wbisim t t
</pre>

<DT><span class="strong">itree_wbisim_rules</span>
<DD>
<pre>
âŠ¢ (âˆ€t t'. itree_wbisim t t' â‡’ itree_wbisim (Tau t) (Tau t')) âˆ§
  (âˆ€e k k' t t'.
     strip_tau t (Vis e k) âˆ§ strip_tau t' (Vis e k') âˆ§
     (âˆ€r. itree_wbisim (k r) (k' r)) â‡’
     itree_wbisim t t') âˆ§
  âˆ€r t t'. strip_tau t (Ret r) âˆ§ strip_tau t' (Ret r) â‡’ itree_wbisim t t'
</pre>

<DT><span class="strong">itree_wbisim_strip_tau</span>
<DD>
<pre>
âŠ¢ âˆ€t t' t''. itree_wbisim t t' âˆ§ strip_tau t t'' â‡’ itree_wbisim t'' t'
</pre>

<DT><span class="strong">itree_wbisim_strip_tau_Ret</span>
<DD>
<pre>
âŠ¢ âˆ€t t' v. itree_wbisim t t' âˆ§ strip_tau t (Ret v) â‡’ strip_tau t' (Ret v)
</pre>

<DT><span class="strong">itree_wbisim_strip_tau_Vis</span>
<DD>
<pre>
âŠ¢ âˆ€t t' e k.
    itree_wbisim t t' âˆ§ strip_tau t (Vis e k) â‡’
    âˆƒk'. strip_tau t' (Vis e k') âˆ§ âˆ€r. itree_wbisim (k r) (k' r)
</pre>

<DT><span class="strong">itree_wbisim_strip_tau_sym</span>
<DD>
<pre>
âŠ¢ âˆ€t t' t''. itree_wbisim t t' âˆ§ strip_tau t' t'' â‡’ itree_wbisim t t''
</pre>

<DT><span class="strong">itree_wbisim_strong_coind</span>
<DD>
<pre>
âŠ¢ âˆ€R. (âˆ€t t'.
         R t t' â‡’
         (âˆƒt2 t3. t = Tau t2 âˆ§ t' = Tau t3 âˆ§ (R t2 t3 âˆ¨ itree_wbisim t2 t3)) âˆ¨
         (âˆƒe k k'.
            strip_tau t (Vis e k) âˆ§ strip_tau t' (Vis e k') âˆ§
            âˆ€r. R (k r) (k' r) âˆ¨ itree_wbisim (k r) (k' r)) âˆ¨
         âˆƒr. strip_tau t (Ret r) âˆ§ strip_tau t' (Ret r)) â‡’
      âˆ€t t'. R t t' â‡’ itree_wbisim t t'
</pre>

<DT><span class="strong">itree_wbisim_sym</span>
<DD>
<pre>
âŠ¢ âˆ€t t'. itree_wbisim t t' â‡’ itree_wbisim t' t
</pre>

<DT><span class="strong">itree_wbisim_tau</span>
<DD>
<pre>
âŠ¢ âˆ€t t'. itree_wbisim (Tau t) t' â‡’ itree_wbisim t t'
</pre>

<DT><span class="strong">itree_wbisim_tau_eq</span>
<DD>
<pre>
âŠ¢ itree_wbisim (Tau t) t
</pre>

<DT><span class="strong">itree_wbisim_tau_eqn</span>
<DD>
<pre>
âŠ¢ (itree_wbisim (Tau t1) t2 â‡” itree_wbisim t1 t2) âˆ§
  (itree_wbisim t1 (Tau t2) â‡” itree_wbisim t1 t2)
</pre>

<DT><span class="strong">itree_wbisim_trans</span>
<DD>
<pre>
âŠ¢ âˆ€t t' t''. itree_wbisim t t' âˆ§ itree_wbisim t' t'' â‡’ itree_wbisim t t''
</pre>

<DT><span class="strong">itree_wbisim_vis</span>
<DD>
<pre>
âŠ¢ âˆ€e k1 k2.
    (âˆ€r. itree_wbisim (k1 r) (k2 r)) â‡’ itree_wbisim (Vis e k1) (Vis e k2)
</pre>

<DT><span class="strong">spin</span>
<DD>
<pre>
âŠ¢ spin = Tau spin
</pre>

<DT><span class="strong">spin_FUNPOW_Tau</span>
<DD>
<pre>
âŠ¢ âˆ€n. spin = FUNPOW Tau n spin
</pre>

<DT><span class="strong">spin_bind</span>
<DD>
<pre>
âŠ¢ itree_bind spin k = spin
</pre>

<DT><span class="strong">spin_strip_tau</span>
<DD>
<pre>
âŠ¢ âˆ€t. strip_tau spin t â‡’ F
</pre>

<DT><span class="strong">strip_tau_FUNPOW</span>
<DD>
<pre>
âŠ¢ âˆ€t1 t2. strip_tau t1 t2 â‡’ âˆƒn. t1 = FUNPOW Tau n t2
</pre>

<DT><span class="strong">strip_tau_FUNPOW_cancel</span>
<DD>
<pre>
âŠ¢ (âˆ€u. t â‰  Tau u) â‡’ strip_tau (FUNPOW Tau n t) t
</pre>

<DT><span class="strong">strip_tau_cases</span>
<DD>
<pre>
âŠ¢ âˆ€a0 a1.
    strip_tau a0 a1 â‡”
    (âˆƒt. a0 = Tau t âˆ§ strip_tau t a1) âˆ¨ (âˆƒe k. a0 = Vis e k âˆ§ a1 = Vis e k) âˆ¨
    âˆƒv. a0 = Ret v âˆ§ a1 = Ret v
</pre>

<DT><span class="strong">strip_tau_ind</span>
<DD>
<pre>
âŠ¢ âˆ€strip_tau'.
    (âˆ€t t'. strip_tau' t t' â‡’ strip_tau' (Tau t) t') âˆ§
    (âˆ€e k. strip_tau' (Vis e k) (Vis e k)) âˆ§ (âˆ€v. strip_tau' (Ret v) (Ret v)) â‡’
    âˆ€a0 a1. strip_tau a0 a1 â‡’ strip_tau' a0 a1
</pre>

<DT><span class="strong">strip_tau_inj</span>
<DD>
<pre>
âŠ¢ âˆ€t t' t''. strip_tau t t' âˆ§ strip_tau t t'' â‡’ t' = t''
</pre>

<DT><span class="strong">strip_tau_rules</span>
<DD>
<pre>
âŠ¢ (âˆ€t t'. strip_tau t t' â‡’ strip_tau (Tau t) t') âˆ§
  (âˆ€e k. strip_tau (Vis e k) (Vis e k)) âˆ§ âˆ€v. strip_tau (Ret v) (Ret v)
</pre>

<DT><span class="strong">strip_tau_simps</span>
<DD>
<pre>
âŠ¢ (strip_tau t' (Tau t) â‡” F) âˆ§ (strip_tau (Ret v) (Vis e k) â‡” F) âˆ§
  (strip_tau (Vis e k) (Ret v) â‡” F) âˆ§ (strip_tau (Tau t) t' â‡” strip_tau t t')
</pre>

<DT><span class="strong">strip_tau_simps2</span>
<DD>
<pre>
âŠ¢ strip_tau (Ret v) (Ret v') â‡” v = v'
</pre>

<DT><span class="strong">strip_tau_simps3</span>
<DD>
<pre>
âŠ¢ strip_tau (Vis e k) (Vis e' k') â‡” e = e' âˆ§ k = k'
</pre>

<DT><span class="strong">strip_tau_spin</span>
<DD>
<pre>
âŠ¢ (âˆ€t'. Â¬strip_tau t t') â‡’ t = spin
</pre>

<DT><span class="strong">strip_tau_strongind</span>
<DD>
<pre>
âŠ¢ âˆ€strip_tau'.
    (âˆ€t t'. strip_tau t t' âˆ§ strip_tau' t t' â‡’ strip_tau' (Tau t) t') âˆ§
    (âˆ€e k. strip_tau' (Vis e k) (Vis e k)) âˆ§ (âˆ€v. strip_tau' (Ret v) (Ret v)) â‡’
    âˆ€a0 a1. strip_tau a0 a1 â‡’ strip_tau' a0 a1
</pre>

<DT><span class="strong">strip_tau_vis_wbisim</span>
<DD>
<pre>
âŠ¢ âˆ€e k k'.
    strip_tau t (Vis e k) âˆ§ strip_tau t' (Vis e k') âˆ§
    (âˆ€r. itree_wbisim (k r) (k' r)) â‡’
    itree_wbisim t t'
</pre>

<DT><span class="strong">untau_IMP_wbisim</span>
<DD>
<pre>
âŠ¢ âˆ€t t'. untau t = untau t' â‡’ itree_wbisim t t'
</pre>

<DT><span class="strong">untau_spin</span>
<DD>
<pre>
âŠ¢ untau spin = Div
</pre>

<DT><span class="strong">upto_taus_compatible</span>
<DD>
<pre>
âŠ¢ set_compatible wbisim_functional upto_taus_func
</pre>

<DT><span class="strong">wbisim_FUNPOW_Tau</span>
<DD>
<pre>
âŠ¢ (itree_wbisim t (FUNPOW Tau n ht) â‡” itree_wbisim t ht) âˆ§
  (itree_wbisim (FUNPOW Tau n ht) t â‡” itree_wbisim ht t)
</pre>

<DT><span class="strong">wbisim_IMP_untau</span>
<DD>
<pre>
âŠ¢ âˆ€t t'. itree_wbisim t t' â‡’ untau t = untau t'
</pre>

<DT><span class="strong">wbisim_functional_cancel</span>
<DD>
<pre>
âŠ¢ X âŠ† Y â‡’ wbisim_functional X âŠ† wbisim_functional Y
</pre>

<DT><span class="strong">wbisim_functional_gfp</span>
<DD>
<pre>
âŠ¢ gfp wbisim_functional = rel_to_reln itree_wbisim
</pre>

<DT><span class="strong">wbisim_functional_mono</span>
<DD>
<pre>
âŠ¢ monotone wbisim_functional
</pre>

<DT><span class="strong">wbisim_spin_eq</span>
<DD>
<pre>
âŠ¢ itree_wbisim t spin â‡” t = spin
</pre>

</DL>



<hr>
</body>
</html>

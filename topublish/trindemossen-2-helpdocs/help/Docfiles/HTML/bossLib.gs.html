<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>bossLib.gs</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      border: none;
      border-top: 1px solid #1a1a1a;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
</head>
<body>
<h2 id="gs"><code>gs</code></h2>
<pre class="hol4"><code>bossLib.gs : thm list -&gt; tactic</code></pre>
<hr />
<p>Simplifies assumptions and goal conclusion until a normal form is
reached.</p>
<p>A call to <code>gs ths</code> produces a simplification tactic that
repeatedly simplifies with the theorems <code>ths</code>, the stateful
simpset, the natural number arithmetic decision procedure and
normalizer, and let-elimination (as done by <code>simp</code>) over both
a goal’s assumptions and the goal’s conclusion.</p>
<p>Assumptions are simplified first, with assumption terms simplified in
turn in a context that includes all of the other assumptions. After
simplification, if an assumption has been reduced to <code>T</code>
(truth), it is dropped. Otherwise, it is added back to the assumption
list using <code>STRIP_ASSUME_TAC</code>. After this process of
assumption simplification produces no further change (assessed using
<code>CHANGED_TAC</code>), the goal’s conclusion is also simplified, in
a context that assumes all of the (now simplified) asssumptions.</p>
<p>Theorems with restrictions (<code>Once</code>, <code>Ntimes</code>)
passed to the <code>gs</code> tactic will not have those restrictions
refreshed as invocations of the base simplification procedure are
repeated. This means that the restricted theorems will likely only be
applied to the first assumption where the left-hand-sides match.</p>
<h3 id="failure">Failure</h3>
<p>Never fails, but may loop.</p>
<h3 id="example">Example</h3>
<p>The theorem <code>SUB_CANCEL</code> has two preconditions:</p>
<pre class="hol4"><code>   &gt; arithmeticTheory.SUB_CANCEL;
   val it = ⊢ ∀p n m. n ≤ p ∧ m ≤ p ⇒ (p − n = p − m ⇔ n = m): thm</code></pre>
<p>If those preconditions are distributed awkwardly in a goal, neither
<code>fs</code> nor <code>rfs</code> (which make passes over the
assumptions in a particular order) may be able to apply the rewrite.
However, <code>gs</code> will make progress:</p>
<pre class="hol4"><code>   x ≤ b, b - x = b - y, y ≤ b   ?- x * y &lt; 10
  ==============================================  gs[SUB_CANCEL]
           y ≤ b, x = y          ?- y ** 2 &lt; 10</code></pre>
<h3 id="comments">Comments</h3>
<p>The accompanying functions <code>gvs</code>, <code>gnvs</code> and
<code>gns</code> are similar, but tweak the behaviours slightly. The
functions with <code>v</code> in their name eliminate equalities (the
<code>x = y</code> in the example above, say), and the functions with
<code>n</code> in the name do not use <code>STRIP_ASSUME_TAC</code> when
adding assumptions back to the goal. The latter can prevent
case-splits.</p>
<p>The <code>rgs</code> variant attacks the assumptions in the reverse
order to <code>gs</code>. The latter simplifies older assumptions using
newer assumptions, but <code>rgs</code> uses the opposite order. If, for
example, the assumption list includes both <code>0 &lt; n</code> and
<code>n ≠ 0</code>, then <code>gs</code> will preserve one of these and
<code>rgs</code> will preserve the other.</p>
<h3 id="see-also">See also</h3>
<p><a
href="Tactical.CHANGED_TAC.html"><code>Tactical.CHANGED_TAC</code></a>,
<a href="bossLib.simp.html"><code>bossLib.simp</code></a></p>
</body>
</html>

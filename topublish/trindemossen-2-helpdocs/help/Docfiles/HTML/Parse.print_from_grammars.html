<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Parse.print_from_grammars</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      border: none;
      border-top: 1px solid #1a1a1a;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
</head>
<body>
<h2 id="print_from_grammars"><code>print_from_grammars</code></h2>
<pre class="hol4"><code>Parse.print_from_grammars :
  (type_grammar.grammar * term_grammar.grammar) -&gt;
  (hol_type Parse.pprinter * term Parse.pprinter)</code></pre>
<hr />
<p>Returns printing functions based on the supplied grammars.</p>
<p>When given a pair consisting of a type and term grammar (such a pair
is exported with every theory, under the name
<code>&lt;thy&gt;_grammars</code>), this function returns printing
functions that use those grammars to render terms and types using the
system’s standard pretty-printing stream type.</p>
<h3 id="failure">Failure</h3>
<p>Never fails.</p>
<h3 id="example">Example</h3>
<p>With <code>arithmeticTheory</code> loaded, arithmetic expressions and
numerals print pleasingly:</p>
<pre class="hol4"><code>   - load &quot;arithmeticTheory&quot;;
   &gt; val it = () : unit

   - ``3 + x * 4``;
   &gt; val it = ``3 + x * 4`` : term</code></pre>
<p>The printing of these terms is controlled by the global grammar,
which is augmented when the theory of arithmetic is loaded. Printing
functions based on the grammar of the base theory <code>bool</code> can
be defined:</p>
<pre class="hol4"><code>   &gt; val (typepp, termpp) = print_from_grammars bool_grammars;
   val termpp = fn : term Parse.pprinter
   val typepp = fn : hol_type Parse.pprinter</code></pre>
<p>These functions can then be used to print arithmetic terms (note that
neither the global parser nor printer are disturbed by this activity),
using the <code>Portable.pprint</code> function (or
<code>Lib.ppstring</code>, which returns a string):</p>
<pre class="hol4"><code>   &gt; Portable.pprint termpp ``3 + x * 4``;
   arithmetic$+
     (arithmetic$NUMERAL
        (arithmetic$BIT1 (arithmetic$BIT1 arithmetic$ZERO)))
     (arithmetic$* x
        (arithmetic$NUMERAL
           (arithmetic$BIT2 (arithmetic$BIT1 arithmetic$ZERO))))
   &gt; val it = () : unit</code></pre>
<p>Not only have the fixities of <code>+</code> and <code>*</code> been
ignored, but the constants in the term, belonging to
<code>arithmeticTheory</code>, are all printed in “long identifier” form
because the grammars from <code>boolTheory</code> don’t know about
them.</p>
<p>Printing terms with early grammars such as <code>bool_grammars</code>
can remove layers of potentially confusing pretty-printing, including
complicated concrete syntax and overloading, and even the underlying
representation of numerals.</p>
<h3 id="see-also">See also</h3>
<p><a
href="Parse.parse_from_grammars.html"><code>Parse.parse_from_grammars</code></a>,
<a
href="Parse.print_term_by_grammar.html"><code>Parse.print_term_by_grammar</code></a>,
<a href="Parse.Term.html"><code>Parse.Term</code></a>, <a
href="Portable.pprint.html"><code>Portable.pprint</code></a>, <a
href="Lib.ppstring.html"><code>Lib.ppstring</code></a></p>
</body>
</html>

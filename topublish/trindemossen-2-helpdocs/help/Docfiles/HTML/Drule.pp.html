<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Drule.pp</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      border: none;
      border-top: 1px solid #1a1a1a;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
</head>
<body>
<h2 id="pp"><code>pp</code></h2>
<pre class="hol4"><code>Drule.pp : thmpos_dtype.match_position -&gt; thm -&gt; thm</code></pre>
<hr />
<p>Promotes the designated premise to the “top” of an implicational
theorem.</p>
<p>A call to <code>pp pos th</code> finds the premise denoted by
<code>pos</code> in <code>th</code> and promotes it so that it occurs as
the outermost antecedent of the theorem. The theorem argument
<code>th</code> is first normalised by a call to
<code>MP_CANON</code>.</p>
<p>Any theorem whose top level operator (after universal quantifiers are
stripped away) is an implication can be viewed as being of the form</p>
<pre class="hol4"><code>   ∀v1 .. vn. p1 /\ p2 /\ .. pn ==&gt; c</code></pre>
<p>where the variables <code>v1</code> to <code>vn</code> may be free in
some of the antecedents and/or conclusion <code>c</code>. To promote a
premise <code>pi</code> transforms the above into</p>
<pre class="hol4"><code>   ∀va .. vk. pi ==&gt; ∀vx .. vz. pa /\ pb ... /\ pj ==&gt; c</code></pre>
<p>The four constructors of the <code>match_position</code> type can be
used to designate different premises. The <code>Pos f</code> form
applies the function <code>f</code> to the list of premises, and is
expected to return a member of the given list. The <code>Pat q</code>
form finds the first premise that matches the given quotation pattern.
In this context, <code>Any</code> is viewed as a synonym for
<code>Pos hd</code>. Finally, the <code>Concl</code> form selects the
conclusion of the theorem, and “promotes” it by taking the
contrapositive of the theorem.</p>
<p>After promotion some cleanup is performed. If a contrapositive was
taken, double negations in the promoted premise are removed, and in all
cases, universal quantifiers of variables not present in the promoted
premise are pushed down to govern other premises.</p>
<h3 id="failure">Failure</h3>
<p>Fails if the provided match position does not denote a premise
present in the given theorem.</p>
<h3 id="example">Example</h3>
<pre class="hol4"><code>&gt; sortingTheory.ALL_DISTINCT_PERM;
val it = ⊢ ∀l1 l2. PERM l1 l2 ⇒ (ALL_DISTINCT l1 ⇔ ALL_DISTINCT l2)

&gt; it |&gt; iffLR |&gt; pp (Pos last);
val it = ⊢ ∀l1. ALL_DISTINCT l1 ⇒ ∀l2. PERM l1 l2 ⇒ ALL_DISTINCT l2: thm</code></pre>
<h3 id="see-also">See also</h3>
<p><a href="Drule.MP_CANON.html"><code>Drule.MP_CANON</code></a>, <a
href="Tactic.mp_then.html"><code>Tactic.mp_then</code></a></p>
</body>
</html>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Tactical.PAT_ASSUM</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      border: none;
      border-top: 1px solid #1a1a1a;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
</head>
<body>
<h2 id="pat_assum"><code>PAT_ASSUM</code></h2>
<pre class="hol4"><code>Tactical.PAT_ASSUM : term -&gt; thm_tactic -&gt; tactic</code></pre>
<hr />
<p>Finds the first assumption that matches the term argument, applies
the theorem tactic to it. The matching assumption remains in the
assumption list.</p>
<p>The tactic</p>
<pre class="hol4"><code>   PAT_ASSUM tm ttac ([A1, ..., An], g)</code></pre>
<p>finds the first <code>Ai</code> which matches <code>tm</code> using
higher-order pattern matching in the sense of
<code>ho_match_term</code>. Free variables in the pattern that are also
free in the assumptions or the goal must not be bound by the match. In
effect, these variables are being treated as local constants.</p>
<h3 id="failure">Failure</h3>
<p>Fails if the term doesn’t match any of the assumptions, or if the
theorem-tactic fails when applied to the first assumption that does
match the term.</p>
<h3 id="example">Example</h3>
<p>The tactic</p>
<pre class="hol4"><code>   PAT_ASSUM ``x:num = y`` SUBST_ALL_TAC</code></pre>
<p>searches the assumptions for an equality over numbers and causes its
right hand side to be substituted for its left hand side throughout the
goal and assumptions. It also removes the equality from the assumption
list. Trying to use <code>FIRST_ASSUM</code> above (i.e., replacing
<code>PAT_ASSUM</code> with <code>FIRST_ASSUM</code> and dropping the
term argument entirely) would require that the desired equality was the
first such on the list of assumptions.</p>
<p>If one is trying to solve the goal</p>
<pre class="hol4"><code>   { !x. f x = g (x + 1), !x. g x = f0 (f x)} ?- f x = g y</code></pre>
<p>rewriting with the assumptions directly will cause a loop. Instead,
one might want to rewrite with the formula for <code>f</code>. This can
be done in an assumption-order-independent way with</p>
<pre class="hol4"><code>   PAT_ASSUM (Term`!x. f x = f&#39; x`) (fn th =&gt; REWRITE_TAC [th])</code></pre>
<p>This use of the tactic exploits higher order matching to match the
RHS of the assumption, and the fact that <code>f</code> is effectively a
local constant in the goal to find the correct assumption.</p>
<h3 id="comments">Comments</h3>
<p>The behavior of <code>PAT_ASSUM</code> changed in Kananaskis 12. The
old <code>PAT_ASSUM</code> (and <code>qpat_assum</code>,
<code>Q.PAT_ASSUM</code>) was changed to include an extra
<code>_X_</code> (or <code>_x_</code>), indicating that the matching
assumption is pulled out of the assumption list. The old name now
provides a version that doesn’t pull the assumption out of the list.</p>
<h3 id="see-also">See also</h3>
<p><a
href="Tactical.PAT_X_ASSUM.html"><code>Tactical.PAT_X_ASSUM</code></a>,
<a href="Tactical.ASSUM_LIST.html"><code>Tactical.ASSUM_LIST</code></a>,
<a href="Tactical.EVERY.html"><code>Tactical.EVERY</code></a>, <a
href="Tactical.EVERY_ASSUM.html"><code>Tactical.EVERY_ASSUM</code></a>,
<a href="Tactical.FIRST.html"><code>Tactical.FIRST</code></a>, <a
href="Tactical.MAP_EVERY.html"><code>Tactical.MAP_EVERY</code></a>, <a
href="Tactical.MAP_FIRST.html"><code>Tactical.MAP_FIRST</code></a>, <a
href="Thm_cont.UNDISCH_THEN.html"><code>Thm_cont.UNDISCH_THEN</code></a>,
<a href="Term.match_term.html"><code>Term.match_term</code></a></p>
</body>
</html>

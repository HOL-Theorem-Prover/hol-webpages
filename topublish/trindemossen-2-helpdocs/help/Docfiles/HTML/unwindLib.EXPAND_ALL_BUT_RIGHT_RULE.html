<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>unwindLib.EXPAND_ALL_BUT_RIGHT_RULE</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      border: none;
      border-top: 1px solid #1a1a1a;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
</head>
<body>
<h2
id="expand_all_but_right_rule"><code>EXPAND_ALL_BUT_RIGHT_RULE</code></h2>
<pre class="hol4"><code>unwindLib.EXPAND_ALL_BUT_RIGHT_RULE : (string list -&gt; thm list -&gt; thm -&gt; thm)</code></pre>
<hr />
<p>Unfolds, then unwinds all lines (except those specified) as much as
possible, then prunes the unwound lines.</p>
<p><code>EXPAND_ALL_BUT_RIGHT_RULE [`li(k+1)`;...;`lim`] thl</code>
behaves as follows:</p>
<pre class="hol4"><code>    A |- !z1 ... zr.
          t = ?l1 ... lm. t1 /\ ... /\ ui1 /\ ... /\ uik /\ ... /\ tn
   -------------------------------------------------------------------
       B u A |- !z1 ... zr. t = ?li(k+1) ... lim. t1&#39; /\ ... /\ tn&#39;</code></pre>
<p>where each <code>ti'</code> is the result of rewriting
<code>ti</code> with the theorems in <code>thl</code>. The set of
assumptions <code>B</code> is the union of the instantiated assumptions
of the theorems used for rewriting. If none of the rewrites are
applicable to a conjunct, it is unchanged. Those conjuncts that after
rewriting are equations for the lines <code>li1,...,lik</code> (they are
denoted by <code>ui1,...,uik</code>) are used to unwind and the lines
<code>li1,...,lik</code> are then pruned.</p>
<p>The <code>li</code>â€™s are related by the equation:</p>
<pre class="hol4"><code>   {{li1,...,lik}} u {{li(k+1),...,lim}} = {{l1,...,lm}}</code></pre>
<h3 id="failure">Failure</h3>
<p>The function may fail if the argument theorem is not of the specified
form. It will also fail if the unwound lines cannot be pruned. It is
possible for the function to attempt unwinding indefinitely (to
loop).</p>
<h3 id="example">Example</h3>
<pre class="hol4"><code>#EXPAND_ALL_BUT_RIGHT_RULE [`l1`]
# [ASSUME &quot;!in out. INV (in,out) = !(t:num). out t = ~(in t)&quot;]
# (ASSUME
#   &quot;!(in:num-&gt;bool) out.
#     DEV(in,out) =
#      ?l1 l2.
#       INV (l1,l2) /\ INV (l2,out) /\ (!(t:num). l1 t = in t \/ out (t-1))&quot;);;
.. |- !in out.
       DEV(in,out) =
       (?l1. (!t. out t = ~~l1 t) /\ (!t. l1 t = in t \/ ~~l1(t - 1)))</code></pre>
<h3 id="see-also">See also</h3>
<p><a
href="unwindLib.EXPAND_AUTO_RIGHT_RULE.html"><code>unwindLib.EXPAND_AUTO_RIGHT_RULE</code></a>,
<a
href="unwindLib.EXPAND_ALL_BUT_CONV.html"><code>unwindLib.EXPAND_ALL_BUT_CONV</code></a>,
<a
href="unwindLib.EXPAND_AUTO_CONV.html"><code>unwindLib.EXPAND_AUTO_CONV</code></a>,
<a
href="unwindLib.UNFOLD_RIGHT_RULE.html"><code>unwindLib.UNFOLD_RIGHT_RULE</code></a>,
<a
href="unwindLib.UNWIND_ALL_BUT_RIGHT_RULE.html"><code>unwindLib.UNWIND_ALL_BUT_RIGHT_RULE</code></a>,
<a
href="unwindLib.PRUNE_SOME_RIGHT_RULE.html"><code>unwindLib.PRUNE_SOME_RIGHT_RULE</code></a></p>
</body>
</html>

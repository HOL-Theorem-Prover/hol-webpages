<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Term.variant</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      border: none;
      border-top: 1px solid #1a1a1a;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
</head>
<body>
<h2 id="variant"><code>variant</code></h2>
<pre class="hol4"><code>Term.variant : term list -&gt; term -&gt; term</code></pre>
<hr />
<p>Modifies a variable name to avoid clashes.</p>
<p>When applied to a list of variables to avoid clashing with, and a
variable to modify, <code>variant</code> returns a variant of the
variable to modify, that is, it changes the name as intuitively as
possible to make it distinct from any variables in the list, or any
constants. This is done by adding primes to the name.</p>
<p>The exact form of the variable name should not be relied on, except
that the original variable will be returned unmodified unless it is
itself in the list to avoid clashing with, or if it is the name of a
constant.</p>
<h3 id="failure">Failure</h3>
<p><code>variant l t</code> fails if any term in the list <code>l</code>
is not a variable or if <code>t</code> is not a variable.</p>
<h3 id="example">Example</h3>
<p>The following shows a couple of typical cases:</p>
<pre class="hol4"><code>   &gt; variant [“y:bool”, “z:bool”] “x:bool”;
   val it = “x” : term

   &gt; variant [“x:bool”, “x&#39;:num”, “x&#39;&#39;:num”] “x:bool”;
   &gt; val it = “x&#39;&#39;&#39;” : term</code></pre>
<p>while the following shows that clashes with the names of constants
are also avoided:</p>
<pre class="hol4"><code>   &gt; variant [] (mk_var(&quot;T&quot;,bool));
   val it = “T&#39;” : term</code></pre>
<p>The function <code>variant</code> is extremely useful for complicated
derived rules which need to rename variables to avoid free variable
capture while still making the role of the variable obvious to the
user.</p>
<h3 id="comments">Comments</h3>
<p>There is a <code>Term.numvariant</code> function that has the same
type signature, but which varies by adding and then incrementing a
numeric suffix to the variable’s stem.</p>
<h3 id="see-also">See also</h3>
<p><a href="Term.genvar.html"><code>Term.genvar</code></a>, <a
href="Term.prim_variant.html"><code>Term.prim_variant</code></a></p>
</body>
</html>

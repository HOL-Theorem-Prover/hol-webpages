<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Theory.set_MLname</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      border: none;
      border-top: 1px solid #1a1a1a;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
</head>
<body>
<h2 id="set_mlname"><code>set_MLname</code></h2>
<pre class="hol4"><code>Theory.set_MLname : string -&gt; string -&gt; unit</code></pre>
<hr />
<p>Change the name attached to an element of the current theory.</p>
<p>It can happen that an axiom, definition, or theorem gets stored in
the current theory segment under a name that wouldn’t be a suitable ML
identifier. For example, some advanced definition mechanisms in HOL
automatically construct names to bind the results of making a
definition. In some cases, particularly when symbolic identifiers are
involved, a binding name can be generated that is not a valid ML
identifier.</p>
<p>In such cases, we don’t want to fail and lose the work done by the
definition mechanism. Instead, when <code>export_theory</code> is
invoked, all names binding axioms, definitions, and theorems are
examined to see if they are valid ML identifiers. If not, an informative
error message is generated, and it is up to the user to change the names
in the offending bindings. The function <code>set_MLname s1 s2</code>
will replace a binding with name <code>s1</code> by one with name
<code>s2</code>.</p>
<h3 id="failure">Failure</h3>
<p>Never fails, although will give a warning if <code>s1</code> is not
the name of a binding in the current theory segment.</p>
<h3 id="example">Example</h3>
<p>We inductively define a predicate telling if a number is odd in the
following. The name is admittedly obscure, however it illustrates our
point.</p>
<pre class="hol4"><code>- Hol_reln `(%% 1) /\ (!n. %% n ==&gt; %% (n+2))`;
&gt; val it =
    (|- %% 1 /\ !n. %% n ==&gt; %% (n + 2),
     |- !%%&#39;. %%&#39; 1 /\ (!n. %%&#39; n ==&gt; %%&#39; (n + 2)) ==&gt; !a0. %% a0 ==&gt; %%&#39; a0,
     |- !a0. %% a0 = (a0 = 1) \/ ?n. (a0 = n + 2) /\ %% n) : thm * thm * thm

- export_theory();
&lt;&lt;HOL message: The following ML binding names in the theory to be exported:
&quot;%%_rules&quot;, &quot;%%_ind&quot;, &quot;%%_cases&quot;
 are not acceptable ML identifiers.
   Use `set_MLname &lt;bad&gt; &lt;good&gt;&#39; to change each name.&gt;&gt;
! Uncaught exception:
! HOL_ERR

- (set_MLname &quot;%%_rules&quot; &quot;odd_rules&quot;;   (* OK, do what it says *)
   set_MLname &quot;%%_ind&quot;   &quot;odd_ind&quot;;
   set_MLname &quot;%%_cases&quot; &quot;odd_cases&quot;);
&gt; val it = () : unit

- export_theory();
Exporting theory &quot;scratch&quot; ... done.
&gt; val it = () : unit</code></pre>
<h3 id="comments">Comments</h3>
<p>The definition principles that currently have the potential to make
problematic bindings are <code>Hol_datatype</code> and
<code>Hol_reln</code>.</p>
<p>It is slightly awkward to have to repair the names in a post-hoc
fashion. It is probably simpler to proceed by using alphanumeric names
when defining constants, and to use overloading to get the desired
name.</p>
<h3 id="see-also">See also</h3>
<p><a href="bossLib.Hol_reln.html"><code>bossLib.Hol_reln</code></a>, <a
href="bossLib.Hol_datatype.html"><code>bossLib.Hol_datatype</code></a>,
<a
href="Theory.export_theory.html"><code>Theory.export_theory</code></a>,
<a
href="Theory.current_definitions.html"><code>Theory.current_definitions</code></a>,
<a
href="Theory.current_theorems.html"><code>Theory.current_theorems</code></a>,
<a
href="Theory.current_axioms.html"><code>Theory.current_axioms</code></a>,
<a href="DB.thy.html"><code>DB.thy</code></a>, <a
href="DB.dest_theory.html"><code>DB.dest_theory</code></a></p>
</body>
</html>

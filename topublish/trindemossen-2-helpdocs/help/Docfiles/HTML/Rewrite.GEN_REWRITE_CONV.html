<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Rewrite.GEN_REWRITE_CONV</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      border: none;
      border-top: 1px solid #1a1a1a;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
</head>
<body>
<h2 id="gen_rewrite_conv"><code>GEN_REWRITE_CONV</code></h2>
<pre class="hol4"><code>Rewrite.GEN_REWRITE_CONV : ((conv -&gt; conv) -&gt; rewrites -&gt; thm list -&gt; conv)</code></pre>
<hr />
<p>Rewrites a term, selecting terms according to a user-specified
strategy.</p>
<p>Rewriting in HOL is based on the use of equational theorems as
left-to-right replacements on the subterms of an object theorem. This
replacement is mediated by the use of <code>REWR_CONV</code>, which
finds matches between left-hand sides of given equations in a term and
applies the substitution.</p>
<p>Equations used in rewriting are obtained from the theorem lists given
as arguments to the function. These are at first transformed into a form
suitable for rewriting. Conjunctions are separated into individual
rewrites. Theorems with conclusions of the form <code>"~t"</code> are
transformed into the corresponding equations <code>"t = F"</code>.
Theorems <code>"t"</code> which are not equations are cast as equations
of form <code>"t = T"</code>.</p>
<p>If a theorem is used to rewrite a term, its assumptions are added to
the assumptions of the returned theorem. The matching involved uses
variable instantiation. Thus, all free variables are generalized, and
terms are instantiated before substitution. Theorems may have
universally quantified variables.</p>
<p>The theorems with which rewriting is done are divided into two
groups, to facilitate implementing other rewriting tools. However, they
are considered in an order-independent fashion. (That is, the ordering
is an implementation detail which is not specified.)</p>
<p>The search strategy for finding matching subterms is the first
argument to the rule. Matching and substitution may occur at any level
of the term, according to the specified search strategy: the whole term,
or starting from any subterm. The search strategy also specifies the
depth of the search: recursively up to an arbitrary depth until no
matches occur, once over the selected subterm, or any more complex
scheme.</p>
<h3 id="failure">Failure</h3>
<p><code>GEN_REWRITE_CONV</code> fails if the search strategy fails. It
may also cause a non-terminating sequence of rewrites, depending on the
search strategy used.</p>
<p>This conversion is used in the system to implement all other
rewritings conversions, and may provide a user with a method to
fine-tune rewriting of terms.</p>
<h3 id="example">Example</h3>
<p>Suppose we have a term of the form:</p>
<pre class="hol4"><code>   &quot;(1 + 2) + 3 = (3 + 1) + 2&quot;</code></pre>
<p>and we would like to rewrite the left-hand side with the theorem
<code>ADD_SYM</code> without changing the right hand side. This can be
done by using:</p>
<pre class="hol4"><code>   GEN_REWRITE_CONV (RATOR_CONV o ONCE_DEPTH_CONV) empty_rewrites [ADD_SYM] mythm</code></pre>
<p>Other rules, such as <code>ONCE_REWRITE_CONV</code>, would match and
substitute on both sides, which would not be the desirable result.</p>
<p>As another example, <code>REWRITE_CONV</code> could be implemented
as</p>
<pre class="hol4"><code>    GEN_REWRITE_CONV TOP_DEPTH_CONV (implicit_rewrites())</code></pre>
<p>which specifies that matches should be searched recursively starting
from the whole term of the theorem, and <code>implicit_rewrites</code>
must be added to the user defined set of theorems employed in
rewriting.</p>
<h3 id="see-also">See also</h3>
<p><a
href="Rewrite.ONCE_REWRITE_CONV.html"><code>Rewrite.ONCE_REWRITE_CONV</code></a>,
<a
href="Rewrite.PURE_REWRITE_CONV.html"><code>Rewrite.PURE_REWRITE_CONV</code></a>,
<a href="Conv.REWR_CONV.html"><code>Conv.REWR_CONV</code></a>, <a
href="Rewrite.REWRITE_CONV.html"><code>Rewrite.REWRITE_CONV</code></a></p>
</body>
</html>

<HTML>
<head><link rel="icon" href="../../../images/logo.ico" type="image/vnd.microsoft.icon"><TITLE>Theory: patricia_casts</TITLE><meta http-equiv="content-type" content="text/html;charset=UTF-8">
</HEAD>
<BODY bgcolor=linen text=midnightblue>
<H1><font color="black">Theory "patricia_casts"</font></H1>
<STRONG><font size=+3 color="black">Parents</font></STRONG>&nbsp;&nbsp;&nbsp;&nbsp;
    <A HREF = "patriciaTheory.html"><STRONG><font color="black">patricia</font></STRONG></A>

<H1><font color="black">Signature</font></H1>
<center>
<table BORDER=4 CELLPADDING=10 CELLSPACING=1>

    <tr>
    <th>
    <font color="crimson">Type</font>
    <th>
    <font color="crimson">Arity</font><tr><td>
                                          <STRONG><font color="black">word_ptree</font></STRONG>
                                          <td>
                                          2
    <tr>
    <th>
    <font color="crimson">Constant</font>
    <th>
    <font color="crimson">Type</font><tr><td>
                                         <STRONG><font color="black">ADD_LISTs</font></STRONG>
                                         <td>
                                         :'a ptree ->
                                          (string # 'a) list -> 'a ptree
    <tr><td>
        <STRONG><font color="black">ADD_LISTw</font></STRONG>
        <td>
        :('a, 'b) word_ptree -> (bool['a] # 'b) list -> ('a, 'b) word_ptree
    <tr><td>
        <STRONG><font color="black">ADDs</font></STRONG>
        <td>
        :'a ptree -> string # 'a -> 'a ptree
    <tr><td>
        <STRONG><font color="black">ADDw</font></STRONG>
        <td>
        :('a, 'b) word_ptree -> bool['a] # 'b -> ('a, 'b) word_ptree
    <tr><td>
        <STRONG><font color="black">DEPTHw</font></STRONG>
        <td>
        :('a, 'b) word_ptree -> num
    <tr><td>
        <STRONG><font color="black">EVERY_LEAFw</font></STRONG>
        <td>
        :(bool['a] -> 'b -> bool) -> ('a, 'b) word_ptree -> bool
    <tr><td>
        <STRONG><font color="black">EXISTS_LEAFw</font></STRONG>
        <td>
        :(bool['a] -> 'b -> bool) -> ('a, 'b) word_ptree -> bool
    <tr><td>
        <STRONG><font color="black">FINDs</font></STRONG>
        <td>
        :'a ptree -> string -> 'a
    <tr><td>
        <STRONG><font color="black">FINDw</font></STRONG>
        <td>
        :('b, 'a) word_ptree -> bool['b] -> 'a
    <tr><td>
        <STRONG><font color="black">INSERT_PTREEs</font></STRONG>
        <td>
        :string -> ptreeset -> ptreeset
    <tr><td>
        <STRONG><font color="black">INSERT_PTREEw</font></STRONG>
        <td>
        :bool['a] -> 'a word_ptreeset -> 'a word_ptreeset
    <tr><td>
        <STRONG><font color="black">IN_PTREEs</font></STRONG>
        <td>
        :string -> ptreeset -> bool
    <tr><td>
        <STRONG><font color="black">IN_PTREEw</font></STRONG>
        <td>
        :bool['a] -> 'a word_ptreeset -> bool
    <tr><td>
        <STRONG><font color="black">KEYSs</font></STRONG>
        <td>
        :'a ptree -> string list
    <tr><td>
        <STRONG><font color="black">KEYSw</font></STRONG>
        <td>
        :('a, 'b) word_ptree -> bool['a] list
    <tr><td>
        <STRONG><font color="black">PEEKs</font></STRONG>
        <td>
        :'a ptree -> string -> 'a option
    <tr><td>
        <STRONG><font color="black">PEEKw</font></STRONG>
        <td>
        :('a, 'b) word_ptree -> bool['a] -> 'b option
    <tr><td>
        <STRONG><font color="black">PTREE_OF_STRINGSET</font></STRONG>
        <td>
        :ptreeset -> (string -> bool) -> ptreeset
    <tr><td>
        <STRONG><font color="black">PTREE_OF_WORDSET</font></STRONG>
        <td>
        :'a word_ptreeset -> (bool['a] -> bool) -> 'a word_ptreeset
    <tr><td>
        <STRONG><font color="black">REMOVEs</font></STRONG>
        <td>
        :'a ptree -> string -> 'a ptree
    <tr><td>
        <STRONG><font color="black">REMOVEw</font></STRONG>
        <td>
        :('a, 'b) word_ptree -> bool['a] -> ('a, 'b) word_ptree
    <tr><td>
        <STRONG><font color="black">SIZEw</font></STRONG>
        <td>
        :('a, 'b) word_ptree -> num
    <tr><td>
        <STRONG><font color="black">SKIP1</font></STRONG>
        <td>
        :string -> string
    <tr><td>
        <STRONG><font color="black">SOME_PTREE</font></STRONG>
        <td>
        :'b ptree -> ('a, 'b) word_ptree
    <tr><td>
        <STRONG><font color="black">STRINGSET_OF_PTREE</font></STRONG>
        <td>
        :ptreeset -> string -> bool
    <tr><td>
        <STRONG><font color="black">THE_PTREE</font></STRONG>
        <td>
        :('b, 'a) word_ptree -> 'a ptree
    <tr><td>
        <STRONG><font color="black">TRANSFORMw</font></STRONG>
        <td>
        :('a -> 'b) -> ('c, 'a) word_ptree -> ('c, 'b) word_ptree
    <tr><td>
        <STRONG><font color="black">TRAVERSEs</font></STRONG>
        <td>
        :'a ptree -> string list
    <tr><td>
        <STRONG><font color="black">TRAVERSEw</font></STRONG>
        <td>
        :('a, 'b) word_ptree -> bool['a] list
    <tr><td>
        <STRONG><font color="black">UNION_PTREEw</font></STRONG>
        <td>
        :'b word_ptreeset -> 'c word_ptreeset -> 'a word_ptreeset
    <tr><td>
        <STRONG><font color="black">WORDSET_OF_PTREE</font></STRONG>
        <td>
        :'a word_ptreeset -> bool['a] -> bool
    <tr><td>
        <STRONG><font color="black">WordEmpty</font></STRONG>
        <td>
        :('a, 'b) word_ptree
    <tr><td>
        <STRONG><font color="black">Word_ptree</font></STRONG>
        <td>
        :('a -> unit) -> 'b ptree -> ('a, 'b) word_ptree
    <tr><td>
        <STRONG><font color="black">dest_word_ptree</font></STRONG>
        <td>
        :('a, 'b) word_ptree -> (('a -> unit) # 'b ptree) recspace
    <tr><td>
        <STRONG><font color="black">mk_word_ptree</font></STRONG>
        <td>
        :(('a -> unit) # 'b ptree) recspace -> ('a, 'b) word_ptree
    <tr><td>
        <STRONG><font color="black">num_to_string</font></STRONG>
        <td>
        :num -> string
    <tr><td>
        <STRONG><font color="black">string_to_num</font></STRONG>
        <td>
        :string -> num
    <tr><td>
        <STRONG><font color="black">word_ptree_case</font></STRONG>
        <td>
        :(('a -> unit) -> 'b ptree -> 'c) -> ('a, 'b) word_ptree -> 'c
    <tr><td>
        <STRONG><font color="black">word_ptree_size</font></STRONG>
        <td>
        :('a -> num) -> ('b -> num) -> ('a, 'b) word_ptree -> num
    
</table>
</center>

<H1><font color="black">Definitions</font></H1>
<DL>
<DT><STRONG><font color="black">SKIP1_def</font></STRONG>
<DD>
<PRE>
|- !c s. SKIP1 (STRING c s) = s
</PRE>

<DT><STRONG><font color="black">string_to_num_def</font></STRONG>
<DD>
<PRE>
|- !s. string_to_num s = s2n 256 ORD (STRING #"\^A" s)
</PRE>

<DT><STRONG><font color="black">num_to_string_def</font></STRONG>
<DD>
<PRE>
|- !n. num_to_string n = SKIP1 (n2s 256 CHR n)
</PRE>

<DT><STRONG><font color="black">PEEKs_def</font></STRONG>
<DD>
<PRE>
|- !t w. t ' w = t ' (string_to_num w)
</PRE>

<DT><STRONG><font color="black">FINDs_def</font></STRONG>
<DD>
<PRE>
|- !t w. FINDs t w = THE (t ' w)
</PRE>

<DT><STRONG><font color="black">ADDs_def</font></STRONG>
<DD>
<PRE>
|- !t w d. t |+ (w,d) = t |+ (string_to_num w,d)
</PRE>

<DT><STRONG><font color="black">ADD_LISTs_def</font></STRONG>
<DD>
<PRE>
|- $|++ = FOLDL $|+
</PRE>

<DT><STRONG><font color="black">REMOVEs_def</font></STRONG>
<DD>
<PRE>
|- !t w. t \\ w = t \\ string_to_num w
</PRE>

<DT><STRONG><font color="black">TRAVERSEs_def</font></STRONG>
<DD>
<PRE>
|- !t. TRAVERSEs t = MAP num_to_string (TRAVERSE t)
</PRE>

<DT><STRONG><font color="black">KEYSs_def</font></STRONG>
<DD>
<PRE>
|- !t. KEYSs t = QSORT $< (TRAVERSEs t)
</PRE>

<DT><STRONG><font color="black">IN_PTREEs_def</font></STRONG>
<DD>
<PRE>
|- !w t. w IN_PTREEs t <=> string_to_num w IN_PTREE t
</PRE>

<DT><STRONG><font color="black">INSERT_PTREEs_def</font></STRONG>
<DD>
<PRE>
|- !w t. w INSERT_PTREEs t = string_to_num w INSERT_PTREE t
</PRE>

<DT><STRONG><font color="black">STRINGSET_OF_PTREE_def</font></STRONG>
<DD>
<PRE>
|- !t. STRINGSET_OF_PTREE t = LIST_TO_SET (TRAVERSEs t)
</PRE>

<DT><STRONG><font color="black">PTREE_OF_STRINGSET_def</font></STRONG>
<DD>
<PRE>
|- !t s. t |++ s = t |++ IMAGE string_to_num s
</PRE>

<DT><STRONG><font color="black">word_ptree_TY_DEF</font></STRONG>
<DD>
<PRE>
|- ?rep.
     TYPE_DEFINITION
       (\a0'.
          !'word_ptree' .
            (!a0'.
               (?a0 a1.
                  a0' =
                  (\a0 a1. ind_type$CONSTR 0 (a0,a1) (\n. ind_type$BOTTOM)) a0
                    a1) ==>
               'word_ptree' a0') ==>
            'word_ptree' a0') rep
</PRE>

<DT><STRONG><font color="black">word_ptree_repfns</font></STRONG>
<DD>
<PRE>
|- (!a. mk_word_ptree (dest_word_ptree a) = a) /\
   !r.
     (\a0'.
        !'word_ptree' .
          (!a0'.
             (?a0 a1.
                a0' =
                (\a0 a1. ind_type$CONSTR 0 (a0,a1) (\n. ind_type$BOTTOM)) a0
                  a1) ==>
             'word_ptree' a0') ==>
          'word_ptree' a0') r <=> (dest_word_ptree (mk_word_ptree r) = r)
</PRE>

<DT><STRONG><font color="black">word_ptree_case_def</font></STRONG>
<DD>
<PRE>
|- !f a0 a1. word_ptree_case f (Word_ptree a0 a1) = f a0 a1
</PRE>

<DT><STRONG><font color="black">word_ptree_size_def</font></STRONG>
<DD>
<PRE>
|- !f f1 a0 a1. word_ptree_size f f1 (Word_ptree a0 a1) = 1 + ptree_size f1 a1
</PRE>

<DT><STRONG><font color="black">THE_PTREE_def</font></STRONG>
<DD>
<PRE>
|- !a t. THE_PTREE (Word_ptree a t) = t
</PRE>

<DT><STRONG><font color="black">SOME_PTREE_def</font></STRONG>
<DD>
<PRE>
|- !t. SOME_PTREE t = Word_ptree (K ()) t
</PRE>

<DT><STRONG><font color="black">WordEmpty_def</font></STRONG>
<DD>
<PRE>
|- +{}+ = SOME_PTREE <{}>
</PRE>

<DT><STRONG><font color="black">PEEKw_def</font></STRONG>
<DD>
<PRE>
|- !t w. t ' w = THE_PTREE t ' (w2n w)
</PRE>

<DT><STRONG><font color="black">FINDw_def</font></STRONG>
<DD>
<PRE>
|- !t w. FINDw t w = THE (t ' w)
</PRE>

<DT><STRONG><font color="black">ADDw_def</font></STRONG>
<DD>
<PRE>
|- !t w d. t |+ (w,d) = SOME_PTREE (THE_PTREE t |+ (w2n w,d))
</PRE>

<DT><STRONG><font color="black">ADD_LISTw_def</font></STRONG>
<DD>
<PRE>
|- $|++ = FOLDL $|+
</PRE>

<DT><STRONG><font color="black">REMOVEw_def</font></STRONG>
<DD>
<PRE>
|- !t w. t \\ w = SOME_PTREE (THE_PTREE t \\ w2n w)
</PRE>

<DT><STRONG><font color="black">TRAVERSEw_def</font></STRONG>
<DD>
<PRE>
|- !t. TRAVERSEw t = MAP n2w (TRAVERSE (THE_PTREE t))
</PRE>

<DT><STRONG><font color="black">KEYSw_def</font></STRONG>
<DD>
<PRE>
|- !t. KEYSw t = QSORT $<+ (TRAVERSEw t)
</PRE>

<DT><STRONG><font color="black">TRANSFORMw_def</font></STRONG>
<DD>
<PRE>
|- !f t. TRANSFORMw f t = SOME_PTREE (TRANSFORM f (THE_PTREE t))
</PRE>

<DT><STRONG><font color="black">EVERY_LEAFw_def</font></STRONG>
<DD>
<PRE>
|- !P t. EVERY_LEAFw P t <=> EVERY_LEAF (\k d. P (n2w k) d) (THE_PTREE t)
</PRE>

<DT><STRONG><font color="black">EXISTS_LEAFw_def</font></STRONG>
<DD>
<PRE>
|- !P t. EXISTS_LEAFw P t <=> EXISTS_LEAF (\k d. P (n2w k) d) (THE_PTREE t)
</PRE>

<DT><STRONG><font color="black">SIZEw_def</font></STRONG>
<DD>
<PRE>
|- !t. SIZEw t = SIZE (THE_PTREE t)
</PRE>

<DT><STRONG><font color="black">DEPTHw_def</font></STRONG>
<DD>
<PRE>
|- !t. DEPTHw t = DEPTH (THE_PTREE t)
</PRE>

<DT><STRONG><font color="black">IN_PTREEw_def</font></STRONG>
<DD>
<PRE>
|- !w t. w IN_PTREEw t <=> w2n w IN_PTREE THE_PTREE t
</PRE>

<DT><STRONG><font color="black">INSERT_PTREEw_def</font></STRONG>
<DD>
<PRE>
|- !w t. w INSERT_PTREEw t = SOME_PTREE (w2n w INSERT_PTREE THE_PTREE t)
</PRE>

<DT><STRONG><font color="black">WORDSET_OF_PTREE_def</font></STRONG>
<DD>
<PRE>
|- !t. WORDSET_OF_PTREE t = LIST_TO_SET (TRAVERSEw t)
</PRE>

<DT><STRONG><font color="black">UNION_PTREEw_def</font></STRONG>
<DD>
<PRE>
|- !t1 t2.
     t1 UNION_PTREEw t2 = SOME_PTREE (THE_PTREE t1 UNION_PTREE THE_PTREE t2)
</PRE>

<DT><STRONG><font color="black">PTREE_OF_WORDSET_def</font></STRONG>
<DD>
<PRE>
|- !t s. t |++ s = SOME_PTREE (THE_PTREE t |++ IMAGE w2n s)
</PRE>

</DL>


<HR>

<HR>
<H1><font color="black">Theorems</font></H1>
<DL>
<DT><STRONG><font color="black">datatype_word_ptree</font></STRONG>
<DD>
<PRE>
|- DATATYPE (word_ptree Word_ptree)
</PRE>

<DT><STRONG><font color="black">word_ptree_11</font></STRONG>
<DD>
<PRE>
|- !a0 a1 a0' a1'.
     (Word_ptree a0 a1 = Word_ptree a0' a1') <=> (a0 = a0') /\ (a1 = a1')
</PRE>

<DT><STRONG><font color="black">word_ptree_case_cong</font></STRONG>
<DD>
<PRE>
|- !M M' f.
     (M = M') /\
     (!a0 a1. (M' = Word_ptree a0 a1) ==> (f a0 a1 = f' a0 a1)) ==>
     (word_ptree_case f M = word_ptree_case f' M')
</PRE>

<DT><STRONG><font color="black">word_ptree_nchotomy</font></STRONG>
<DD>
<PRE>
|- !ww. ?f p. ww = Word_ptree f p
</PRE>

<DT><STRONG><font color="black">word_ptree_Axiom</font></STRONG>
<DD>
<PRE>
|- !f. ?fn. !a0 a1. fn (Word_ptree a0 a1) = f a0 a1
</PRE>

<DT><STRONG><font color="black">word_ptree_induction</font></STRONG>
<DD>
<PRE>
|- !P. (!f p. P (Word_ptree f p)) ==> !w. P w
</PRE>

<DT><STRONG><font color="black">ADD_INSERT_STRING</font></STRONG>
<DD>
<PRE>
|- !w v t. t |+ (w,v) = t |+ (w,())
</PRE>

<DT><STRONG><font color="black">l2n_APPEND</font></STRONG>
<DD>
<PRE>
|- !b l1 l2. l2n b (l1 ++ l2) = l2n b l1 + b ** LENGTH l1 * l2n b l2
</PRE>

<DT><STRONG><font color="black">l2n_LENGTH</font></STRONG>
<DD>
<PRE>
|- !b l. 1 < b ==> l2n b l < b ** LENGTH l
</PRE>

<DT><STRONG><font color="black">l2n_11</font></STRONG>
<DD>
<PRE>
|- !b l1 l2.
     1 < b /\ EVERY ($> b) l1 /\ EVERY ($> b) l2 ==>
     ((l2n b (l1 ++ [1]) = l2n b (l2 ++ [1])) <=> (l1 = l2))
</PRE>

<DT><STRONG><font color="black">EVERY_MAP_ORD</font></STRONG>
<DD>
<PRE>
|- !l. EVERY ($> 256) (MAP ORD l)
</PRE>

<DT><STRONG><font color="black">MAP_11</font></STRONG>
<DD>
<PRE>
|- !f l1 l2.
     (!x y. (f x = f y) <=> (x = y)) ==> ((MAP f l1 = MAP f l2) <=> (l1 = l2))
</PRE>

<DT><STRONG><font color="black">REVERSE_11</font></STRONG>
<DD>
<PRE>
|- !l1 l2. (REVERSE l1 = REVERSE l2) <=> (l1 = l2)
</PRE>

<DT><STRONG><font color="black">string_to_num_11</font></STRONG>
<DD>
<PRE>
|- !s t. (string_to_num s = string_to_num t) <=> (s = t)
</PRE>

<DT><STRONG><font color="black">IMAGE_string_to_num</font></STRONG>
<DD>
<PRE>
|- !n.
     (n = 1) \/ 256 <= n /\ (n DIV 256 ** LOG 256 n = 1) <=>
     n IN IMAGE string_to_num UNIV
</PRE>

<DT><STRONG><font color="black">string_to_num_num_to_string</font></STRONG>
<DD>
<PRE>
|- !n. n IN IMAGE string_to_num UNIV ==> (string_to_num (num_to_string n) = n)
</PRE>

<DT><STRONG><font color="black">num_to_string_string_to_num</font></STRONG>
<DD>
<PRE>
|- !s. num_to_string (string_to_num s) = s
</PRE>

<DT><STRONG><font color="black">ADD_INSERT_WORD</font></STRONG>
<DD>
<PRE>
|- !w v t. t |+ (w,v) = t |+ (w,())
</PRE>

<DT><STRONG><font color="black">THE_PTREE_SOME_PTREE</font></STRONG>
<DD>
<PRE>
|- !t. THE_PTREE (SOME_PTREE t) = t
</PRE>

</DL>



<HR>
</BODY>
</HTML>

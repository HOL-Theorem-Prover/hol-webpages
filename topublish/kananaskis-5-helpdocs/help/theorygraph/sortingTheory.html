<HTML>
<head><link rel="icon" href="../../../images/logo.ico" type="image/vnd.microsoft.icon"><TITLE>Theory: sorting</TITLE><meta http-equiv="content-type" content="text/html;charset=UTF-8">
</HEAD>
<BODY bgcolor=linen text=midnightblue>
<H1><font color="black">Theory "sorting"</font></H1>
<STRONG><font size=+3 color="black">Parents</font></STRONG>&nbsp;&nbsp;&nbsp;&nbsp;
    <A HREF = "listTheory.html"><STRONG><font color="black">list</font></STRONG></A>

<H1><font color="black">Signature</font></H1>
<center>
<table BORDER=4 CELLPADDING=10 CELLSPACING=1>

    <tr>
    <th>
    <font color="crimson">Constant</font>
    <th>
    <font color="crimson">Type</font><tr><td>
                                         <STRONG><font color="black">PART</font></STRONG>
                                         <td>
                                         :('a -> bool) ->
                                          'a list ->
                                          'a list ->
                                          'a list -> 'a list # 'a list
    <tr><td>
        <STRONG><font color="black">PARTITION</font></STRONG>
        <td>
        :('a -> bool) -> 'a list -> 'a list # 'a list
    <tr><td>
        <STRONG><font color="black">PERM</font></STRONG>
        <td>
        :'a list -> 'a list -> bool
    <tr><td>
        <STRONG><font color="black">PERM_SINGLE_SWAP</font></STRONG>
        <td>
        :'a list -> 'a list -> bool
    <tr><td>
        <STRONG><font color="black">QSORT</font></STRONG>
        <td>
        :('a -> 'a -> bool) -> 'a list -> 'a list
    <tr><td>
        <STRONG><font color="black">QSORT_tupled</font></STRONG>
        <td>
        :('a -> 'a -> bool) # 'a list -> 'a list
    <tr><td>
        <STRONG><font color="black">SORTED</font></STRONG>
        <td>
        :('a -> 'a -> bool) -> 'a list -> bool
    <tr><td>
        <STRONG><font color="black">SORTED_tupled</font></STRONG>
        <td>
        :('a -> 'a -> bool) # 'a list -> bool
    <tr><td>
        <STRONG><font color="black">SORTS</font></STRONG>
        <td>
        :(('a -> 'a -> bool) -> 'a list -> 'a list) ->
         ('a -> 'a -> bool) -> bool
    
</table>
</center>

<H1><font color="black">Definitions</font></H1>
<DL>
<DT><STRONG><font color="black">PERM_DEF</font></STRONG>
<DD>
<PRE>
|- !L1 L2. PERM L1 L2 <=> !x. FILTER ($= x) L1 = FILTER ($= x) L2
</PRE>

<DT><STRONG><font color="black">SORTED_tupled_primitive_DEF</font></STRONG>
<DD>
<PRE>
|- SORTED_tupled =
   WFREC (@R'. WF R' /\ !x rst y R. R' (R,y::rst) (R,x::y::rst))
     (\SORTED_tupled a.
        case a of
           (R,[]) -> I T
        || (R,[x]) -> I T
        || (R,x::y::rst) -> I (R x y /\ SORTED_tupled (R,y::rst)))
</PRE>

<DT><STRONG><font color="black">SORTED_curried_DEF</font></STRONG>
<DD>
<PRE>
|- !x x1. SORTED x x1 <=> SORTED_tupled (x,x1)
</PRE>

<DT><STRONG><font color="black">SORTS_DEF</font></STRONG>
<DD>
<PRE>
|- !f R. SORTS f R <=> !l. PERM l (f R l) /\ SORTED R (f R l)
</PRE>

<DT><STRONG><font color="black">PART_DEF</font></STRONG>
<DD>
<PRE>
|- (!P l1 l2. PART P [] l1 l2 = (l1,l2)) /\
   !P h rst l1 l2.
     PART P (h::rst) l1 l2 =
     if P h then PART P rst (h::l1) l2 else PART P rst l1 (h::l2)
</PRE>

<DT><STRONG><font color="black">PARTITION_DEF</font></STRONG>
<DD>
<PRE>
|- !P l. PARTITION P l = PART P l [] []
</PRE>

<DT><STRONG><font color="black">QSORT_tupled_primitive_DEF</font></STRONG>
<DD>
<PRE>
|- QSORT_tupled =
   WFREC
     (@R.
        WF R /\
        (!t h ord l1 l2.
           ((l1,l2) = PARTITION (\y. ord y h) t) ==> R (ord,l2) (ord,h::t)) /\
        !t h ord l1 l2.
          ((l1,l2) = PARTITION (\y. ord y h) t) ==> R (ord,l1) (ord,h::t))
     (\QSORT_tupled a.
        case a of
           (ord,[]) -> I []
        || (ord,h::t) ->
             I
               (let (l1,l2) = PARTITION (\y. ord y h) t in
                  QSORT_tupled (ord,l1) ++ [h] ++ QSORT_tupled (ord,l2)))
</PRE>

<DT><STRONG><font color="black">QSORT_curried_DEF</font></STRONG>
<DD>
<PRE>
|- !x x1. QSORT x x1 = QSORT_tupled (x,x1)
</PRE>

<DT><STRONG><font color="black">PERM_SINGLE_SWAP_DEF</font></STRONG>
<DD>
<PRE>
|- !l1 l2.
     PERM_SINGLE_SWAP l1 l2 <=>
     ?x1 x2 x3. (l1 = x1 ++ x2 ++ x3) /\ (l2 = x1 ++ x3 ++ x2)
</PRE>

</DL>


<HR>

<HR>
<H1><font color="black">Theorems</font></H1>
<DL>
<DT><STRONG><font color="black">PERM_FUN_APPEND_APPEND_2</font></STRONG>
<DD>
<PRE>
|- !l1 l2 l3 l4.
     (PERM l1 = PERM (l2 ++ l3)) ==>
     (PERM (l4 ++ l1) = PERM (l2 ++ (l4 ++ l3)))
</PRE>

<DT><STRONG><font color="black">PERM_FUN_APPEND_APPEND_1</font></STRONG>
<DD>
<PRE>
|- !l1 l2 l3 l4.
     (PERM l1 = PERM (l2 ++ l3)) ==>
     (PERM (l1 ++ l4) = PERM (l2 ++ (l3 ++ l4)))
</PRE>

<DT><STRONG><font color="black">PERM_FUN_CONS_APPEND_2</font></STRONG>
<DD>
<PRE>
|- !l l1 x l2.
     (PERM l1 = PERM (x::l2)) ==> (PERM (l ++ l1) = PERM (x::(l ++ l2)))
</PRE>

<DT><STRONG><font color="black">PERM_FUN_CONS_APPEND_1</font></STRONG>
<DD>
<PRE>
|- !l l1 x l2.
     (PERM l1 = PERM (x::l2)) ==> (PERM (l1 ++ l) = PERM (x::(l2 ++ l)))
</PRE>

<DT><STRONG><font color="black">PERM_FUN_CONS_11_APPEND</font></STRONG>
<DD>
<PRE>
|- !y l1 l2 l3.
     (PERM l1 = PERM (l2 ++ l3)) ==> (PERM (y::l1) = PERM (l2 ++ y::l3))
</PRE>

<DT><STRONG><font color="black">PERM_FUN_CONS_11_SWAP_AT_FRONT</font></STRONG>
<DD>
<PRE>
|- !y l1 x l2. (PERM l1 = PERM (x::l2)) ==> (PERM (y::l1) = PERM (x::y::l2))
</PRE>

<DT><STRONG><font color="black">PERM_FUN_SWAP_AT_FRONT</font></STRONG>
<DD>
<PRE>
|- !x y l. PERM (x::y::l) = PERM (y::x::l)
</PRE>

<DT><STRONG><font color="black">PERM_FUN_APPEND_CONS</font></STRONG>
<DD>
<PRE>
|- !x l1 l2. PERM (l1 ++ x::l2) = PERM (x::l1 ++ l2)
</PRE>

<DT><STRONG><font color="black">PERM_FUN_CONS</font></STRONG>
<DD>
<PRE>
|- !x l1 l1'. (PERM l1 = PERM l1') ==> (PERM (x::l1) = PERM (x::l1'))
</PRE>

<DT><STRONG><font color="black">PERM_REFL</font></STRONG>
<DD>
<PRE>
|- !L. PERM L L
</PRE>

<DT><STRONG><font color="black">PERM_INTRO</font></STRONG>
<DD>
<PRE>
|- !x y. (x = y) ==> PERM x y
</PRE>

<DT><STRONG><font color="black">PERM_transitive</font></STRONG>
<DD>
<PRE>
|- transitive PERM
</PRE>

<DT><STRONG><font color="black">PERM_TRANS</font></STRONG>
<DD>
<PRE>
|- !x y z. PERM x y /\ PERM y z ==> PERM x z
</PRE>

<DT><STRONG><font color="black">PERM_SYM</font></STRONG>
<DD>
<PRE>
|- !l1 l2. PERM l1 l2 <=> PERM l2 l1
</PRE>

<DT><STRONG><font color="black">PERM_CONG</font></STRONG>
<DD>
<PRE>
|- !L1 L2 L3 L4. PERM L1 L3 /\ PERM L2 L4 ==> PERM (L1 ++ L2) (L3 ++ L4)
</PRE>

<DT><STRONG><font color="black">PERM_MONO</font></STRONG>
<DD>
<PRE>
|- !l1 l2 x. PERM l1 l2 ==> PERM (x::l1) (x::l2)
</PRE>

<DT><STRONG><font color="black">PERM_CONS_IFF</font></STRONG>
<DD>
<PRE>
|- !x l2 l1. PERM (x::l1) (x::l2) <=> PERM l1 l2
</PRE>

<DT><STRONG><font color="black">PERM_NIL</font></STRONG>
<DD>
<PRE>
|- !L. (PERM L [] <=> (L = [])) /\ (PERM [] L <=> (L = []))
</PRE>

<DT><STRONG><font color="black">PERM_SING</font></STRONG>
<DD>
<PRE>
|- (PERM L [x] <=> (L = [x])) /\ (PERM [x] L <=> (L = [x]))
</PRE>

<DT><STRONG><font color="black">PERM_CONS_EQ_APPEND</font></STRONG>
<DD>
<PRE>
|- !L h. PERM (h::t) L <=> ?M N. (L = M ++ h::N) /\ PERM t (M ++ N)
</PRE>

<DT><STRONG><font color="black">PERM_APPEND</font></STRONG>
<DD>
<PRE>
|- !l1 l2. PERM (l1 ++ l2) (l2 ++ l1)
</PRE>

<DT><STRONG><font color="black">CONS_PERM</font></STRONG>
<DD>
<PRE>
|- !x L M N. PERM L (M ++ N) ==> PERM (x::L) (M ++ x::N)
</PRE>

<DT><STRONG><font color="black">APPEND_PERM_SYM</font></STRONG>
<DD>
<PRE>
|- !A B C. PERM (A ++ B) C ==> PERM (B ++ A) C
</PRE>

<DT><STRONG><font color="black">PERM_SPLIT</font></STRONG>
<DD>
<PRE>
|- !P l. PERM l (FILTER P l ++ FILTER ($~ o P) l)
</PRE>

<DT><STRONG><font color="black">PERM_IND</font></STRONG>
<DD>
<PRE>
|- !P.
     P [] [] /\ (!x l1 l2. P l1 l2 ==> P (x::l1) (x::l2)) /\
     (!x y l1 l2. P l1 l2 ==> P (x::y::l1) (y::x::l2)) /\
     (!l1 l2 l3. P l1 l2 /\ P l2 l3 ==> P l1 l3) ==>
     !l1 l2. PERM l1 l2 ==> P l1 l2
</PRE>

<DT><STRONG><font color="black">PERM_SWAP_AT_FRONT</font></STRONG>
<DD>
<PRE>
|- PERM (x::y::l1) (y::x::l2) <=> PERM l1 l2
</PRE>

<DT><STRONG><font color="black">PERM_LENGTH</font></STRONG>
<DD>
<PRE>
|- !l1 l2. PERM l1 l2 ==> (LENGTH l1 = LENGTH l2)
</PRE>

<DT><STRONG><font color="black">PERM_MEM_EQ</font></STRONG>
<DD>
<PRE>
|- !l1 l2. PERM l1 l2 ==> !x. MEM x l1 <=> MEM x l2
</PRE>

<DT><STRONG><font color="black">SORTED_IND</font></STRONG>
<DD>
<PRE>
|- !P.
     (!R. P R []) /\ (!R x. P R [x]) /\
     (!R x y rst. P R (y::rst) ==> P R (x::y::rst)) ==>
     !v v1. P v v1
</PRE>

<DT><STRONG><font color="black">SORTED_DEF</font></STRONG>
<DD>
<PRE>
|- (!R. SORTED R [] <=> T) /\ (!x R. SORTED R [x] <=> T) /\
   !y x rst R. SORTED R (x::y::rst) <=> R x y /\ SORTED R (y::rst)
</PRE>

<DT><STRONG><font color="black">SORTED_EQ</font></STRONG>
<DD>
<PRE>
|- !R L x.
     transitive R ==>
     (SORTED R (x::L) <=> SORTED R L /\ !y. MEM y L ==> R x y)
</PRE>

<DT><STRONG><font color="black">SORTED_APPEND</font></STRONG>
<DD>
<PRE>
|- !R L1 L2.
     transitive R /\ SORTED R L1 /\ SORTED R L2 /\
     (!x y. MEM x L1 /\ MEM y L2 ==> R x y) ==>
     SORTED R (L1 ++ L2)
</PRE>

<DT><STRONG><font color="black">PART_LENGTH</font></STRONG>
<DD>
<PRE>
|- !P L l1 l2 p q.
     ((p,q) = PART P L l1 l2) ==>
     (LENGTH L + LENGTH l1 + LENGTH l2 = LENGTH p + LENGTH q)
</PRE>

<DT><STRONG><font color="black">PART_LENGTH_LEM</font></STRONG>
<DD>
<PRE>
|- !P L l1 l2 p q.
     ((p,q) = PART P L l1 l2) ==>
     LENGTH p <= LENGTH L + LENGTH l1 + LENGTH l2 /\
     LENGTH q <= LENGTH L + LENGTH l1 + LENGTH l2
</PRE>

<DT><STRONG><font color="black">PARTs_HAVE_PROP</font></STRONG>
<DD>
<PRE>
|- !P L A B l1 l2.
     ((A,B) = PART P L l1 l2) /\ (!x. MEM x l1 ==> P x) /\
     (!x. MEM x l2 ==> ~P x) ==>
     (!z. MEM z A ==> P z) /\ !z. MEM z B ==> ~P z
</PRE>

<DT><STRONG><font color="black">PART_MEM</font></STRONG>
<DD>
<PRE>
|- !P L a1 a2 l1 l2.
     ((a1,a2) = PART P L l1 l2) ==>
     !x. MEM x (L ++ (l1 ++ l2)) <=> MEM x (a1 ++ a2)
</PRE>

<DT><STRONG><font color="black">QSORT_IND</font></STRONG>
<DD>
<PRE>
|- !P.
     (!ord. P ord []) /\
     (!ord h t.
        (!l1 l2. ((l1,l2) = PARTITION (\y. ord y h) t) ==> P ord l2) /\
        (!l1 l2. ((l1,l2) = PARTITION (\y. ord y h) t) ==> P ord l1) ==>
        P ord (h::t)) ==>
     !v v1. P v v1
</PRE>

<DT><STRONG><font color="black">QSORT_DEF</font></STRONG>
<DD>
<PRE>
|- (QSORT ord [] = []) /\
   (QSORT ord (h::t) =
    (let (l1,l2) = PARTITION (\y. ord y h) t in
       QSORT ord l1 ++ [h] ++ QSORT ord l2))
</PRE>

<DT><STRONG><font color="black">QSORT_MEM</font></STRONG>
<DD>
<PRE>
|- !R L x. MEM x (QSORT R L) <=> MEM x L
</PRE>

<DT><STRONG><font color="black">QSORT_PERM</font></STRONG>
<DD>
<PRE>
|- !R L. PERM L (QSORT R L)
</PRE>

<DT><STRONG><font color="black">QSORT_SORTED</font></STRONG>
<DD>
<PRE>
|- !R L. transitive R /\ total R ==> SORTED R (QSORT R L)
</PRE>

<DT><STRONG><font color="black">QSORT_SORTS</font></STRONG>
<DD>
<PRE>
|- !R. transitive R /\ total R ==> SORTS QSORT R
</PRE>

<DT><STRONG><font color="black">PERM_APPEND_IFF</font></STRONG>
<DD>
<PRE>
|- (!l l1 l2. PERM (l ++ l1) (l ++ l2) <=> PERM l1 l2) /\
   !l l1 l2. PERM (l1 ++ l) (l2 ++ l) <=> PERM l1 l2
</PRE>

<DT><STRONG><font color="black">PERM_SINGLE_SWAP_REFL</font></STRONG>
<DD>
<PRE>
|- !l. PERM_SINGLE_SWAP l l
</PRE>

<DT><STRONG><font color="black">PERM_SINGLE_SWAP_SYM</font></STRONG>
<DD>
<PRE>
|- !l1 l2. PERM_SINGLE_SWAP l1 l2 <=> PERM_SINGLE_SWAP l2 l1
</PRE>

<DT><STRONG><font color="black">PERM_TC</font></STRONG>
<DD>
<PRE>
|- PERM = PERM_SINGLE_SWAP^+
</PRE>

<DT><STRONG><font color="black">PERM_RTC</font></STRONG>
<DD>
<PRE>
|- PERM = PERM_SINGLE_SWAP^*
</PRE>

<DT><STRONG><font color="black">PERM_EQC</font></STRONG>
<DD>
<PRE>
|- PERM = PERM_SINGLE_SWAP^=
</PRE>

<DT><STRONG><font color="black">PERM_lifts_transitive_relations</font></STRONG>
<DD>
<PRE>
|- !f Q.
     (!x1 x2 x3. Q (f (x1 ++ x2 ++ x3)) (f (x1 ++ x3 ++ x2))) /\
     transitive Q ==>
     !x y. PERM x y ==> Q (f x) (f y)
</PRE>

<DT><STRONG><font color="black">PERM_lifts_equalities</font></STRONG>
<DD>
<PRE>
|- !f.
     (!x1 x2 x3. f (x1 ++ x2 ++ x3) = f (x1 ++ x3 ++ x2)) ==>
     !x y. PERM x y ==> (f x = f y)
</PRE>

<DT><STRONG><font color="black">PERM_lifts_invariants</font></STRONG>
<DD>
<PRE>
|- !P.
     (!x1 x2 x3. P (x1 ++ x2 ++ x3) ==> P (x1 ++ x3 ++ x2)) ==>
     !x y. P x /\ PERM x y ==> P y
</PRE>

<DT><STRONG><font color="black">PERM_lifts_monotonicities</font></STRONG>
<DD>
<PRE>
|- !f.
     (!x1 x2 x3.
        ?x1' x2' x3'.
          (f (x1 ++ x2 ++ x3) = x1' ++ x2' ++ x3') /\
          (f (x1 ++ x3 ++ x2) = x1' ++ x3' ++ x2')) ==>
     !x y. PERM x y ==> PERM (f x) (f y)
</PRE>

<DT><STRONG><font color="black">PERM_EQUIVALENCE</font></STRONG>
<DD>
<PRE>
|- equivalence PERM
</PRE>

<DT><STRONG><font color="black">PERM_EQUIVALENCE_ALT_DEF</font></STRONG>
<DD>
<PRE>
|- !x y. PERM x y <=> (PERM x = PERM y)
</PRE>

<DT><STRONG><font color="black">ALL_DISTINCT_PERM</font></STRONG>
<DD>
<PRE>
|- !l1 l2. PERM l1 l2 ==> (ALL_DISTINCT l1 <=> ALL_DISTINCT l2)
</PRE>

<DT><STRONG><font color="black">PERM_ALL_DISTINCT</font></STRONG>
<DD>
<PRE>
|- !l1 l2.
     ALL_DISTINCT l1 /\ ALL_DISTINCT l2 /\ (!x. MEM x l1 <=> MEM x l2) ==>
     PERM l1 l2
</PRE>

<DT><STRONG><font color="black">PERM_MAP</font></STRONG>
<DD>
<PRE>
|- !f l1 l2. PERM l1 l2 ==> PERM (MAP f l1) (MAP f l2)
</PRE>

<DT><STRONG><font color="black">PERM_FILTER</font></STRONG>
<DD>
<PRE>
|- !P l1 l2. PERM l1 l2 ==> PERM (FILTER P l1) (FILTER P l2)
</PRE>

<DT><STRONG><font color="black">FOLDR_PERM</font></STRONG>
<DD>
<PRE>
|- !f l1 l2 e.
     ASSOC f /\ COMM f ==> PERM l1 l2 ==> (FOLDR f e l1 = FOLDR f e l2)
</PRE>

<DT><STRONG><font color="black">PERM_FUN_APPEND</font></STRONG>
<DD>
<PRE>
|- !l1 l2. PERM (l1 ++ l2) = PERM (l2 ++ l1)
</PRE>

<DT><STRONG><font color="black">PERM_FUN_CONS_IFF</font></STRONG>
<DD>
<PRE>
|- !x l1 l2. (PERM l1 = PERM l2) ==> (PERM (x::l1) = PERM (x::l2))
</PRE>

<DT><STRONG><font color="black">PERM_FUN_APPEND_IFF</font></STRONG>
<DD>
<PRE>
|- !l l1 l2. (PERM l1 = PERM l2) ==> (PERM (l ++ l1) = PERM (l ++ l2))
</PRE>

<DT><STRONG><font color="black">PERM_FUN_CONG</font></STRONG>
<DD>
<PRE>
|- !l1 l1' l2 l2'.
     (PERM l1 = PERM l1') ==>
     (PERM l2 = PERM l2') ==>
     (PERM l1 l2 <=> PERM l1' l2')
</PRE>

<DT><STRONG><font color="black">PERM_CONG_2</font></STRONG>
<DD>
<PRE>
|- !l1 l1' l2 l2'.
     PERM l1 l1' ==> PERM l2 l2' ==> (PERM l1 l2 <=> PERM l1' l2')
</PRE>

<DT><STRONG><font color="black">PERM_CONG_APPEND_IFF</font></STRONG>
<DD>
<PRE>
|- !l l1 l1' l2 l2'.
     PERM l1 (l ++ l1') ==>
     PERM l2 (l ++ l2') ==>
     (PERM l1 l2 <=> PERM l1' l2')
</PRE>

<DT><STRONG><font color="black">PERM_FUN_SPLIT</font></STRONG>
<DD>
<PRE>
|- !l l1 l1' l2. PERM l (l1 ++ l2) ==> PERM l1' l1 ==> PERM l (l1' ++ l2)
</PRE>

<DT><STRONG><font color="black">PERM_REWR</font></STRONG>
<DD>
<PRE>
|- !l r l1 l2. PERM l r ==> (PERM (l ++ l1) l2 <=> PERM (r ++ l1) l2)
</PRE>

</DL>



<HR>
</BODY>
</HTML>

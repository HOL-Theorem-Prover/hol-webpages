<HTML>
<head><link rel="icon" href="../../../images/logo.ico" type="image/vnd.microsoft.icon"><TITLE>Theory: finite_map</TITLE><meta http-equiv="content-type" content="text/html;charset=UTF-8">
</HEAD>
<BODY bgcolor=linen text=midnightblue>
<H1><font color="black">Theory "finite_map"</font></H1>
<STRONG><font size=+3 color="black">Parents</font></STRONG>&nbsp;&nbsp;&nbsp;&nbsp;
    <A HREF = "listTheory.html"><STRONG><font color="black">list</font></STRONG></A>

<H1><font color="black">Signature</font></H1>
<center>
<table BORDER=4 CELLPADDING=10 CELLSPACING=1>

    <tr>
    <th>
    <font color="crimson">Type</font>
    <th>
    <font color="crimson">Arity</font><tr><td>
                                          <STRONG><font color="black">fmap</font></STRONG>
                                          <td>
                                          2
    <tr>
    <th>
    <font color="crimson">Constant</font>
    <th>
    <font color="crimson">Type</font><tr><td>
                                         <STRONG><font color="black">DRESTRICT</font></STRONG>
                                         <td>
                                         :('a |-> 'b) ->
                                          ('a -> bool) -> ('a |-> 'b)
    <tr><td>
        <STRONG><font color="black">FAPPLY</font></STRONG>
        <td>
        :('a |-> 'b) -> 'a -> 'b
    <tr><td>
        <STRONG><font color="black">FCARD</font></STRONG>
        <td>
        :('a |-> 'b) -> num
    <tr><td>
        <STRONG><font color="black">FDOM</font></STRONG>
        <td>
        :('a |-> 'b) -> 'a -> bool
    <tr><td>
        <STRONG><font color="black">FEMPTY</font></STRONG>
        <td>
        :'a |-> 'b
    <tr><td>
        <STRONG><font color="black">FEVERY</font></STRONG>
        <td>
        :('a # 'b -> bool) -> ('a |-> 'b) -> bool
    <tr><td>
        <STRONG><font color="black">FLOOKUP</font></STRONG>
        <td>
        :('a |-> 'b) -> 'a -> 'b option
    <tr><td>
        <STRONG><font color="black">FMAP_MAP2</font></STRONG>
        <td>
        :('a # 'c -> 'b) -> ('a |-> 'c) -> ('a |-> 'b)
    <tr><td>
        <STRONG><font color="black">FMERGE</font></STRONG>
        <td>
        :('a -> 'a -> 'a) -> ('b |-> 'a) -> ('b |-> 'a) -> ('b |-> 'a)
    <tr><td>
        <STRONG><font color="black">FRANGE</font></STRONG>
        <td>
        :('a |-> 'b) -> 'b -> bool
    <tr><td>
        <STRONG><font color="black">FUNION</font></STRONG>
        <td>
        :('a |-> 'b) -> ('a |-> 'b) -> ('a |-> 'b)
    <tr><td>
        <STRONG><font color="black">FUN_FMAP</font></STRONG>
        <td>
        :('a -> 'b) -> ('a -> bool) -> ('a |-> 'b)
    <tr><td>
        <STRONG><font color="black">FUPDATE</font></STRONG>
        <td>
        :('a |-> 'b) -> 'a # 'b -> ('a |-> 'b)
    <tr><td>
        <STRONG><font color="black">FUPDATE_LIST</font></STRONG>
        <td>
        :('a |-> 'b) -> ('a # 'b) list -> ('a |-> 'b)
    <tr><td>
        <STRONG><font color="black">RRESTRICT</font></STRONG>
        <td>
        :('a |-> 'b) -> ('b -> bool) -> ('a |-> 'b)
    <tr><td>
        <STRONG><font color="black">SUBMAP</font></STRONG>
        <td>
        :('a |-> 'b) -> ('a |-> 'b) -> bool
    <tr><td>
        <STRONG><font color="black">\\</font></STRONG>
        <td>
        :('a |-> 'b) -> 'a -> ('a |-> 'b)
    <tr><td>
        <STRONG><font color="black">f_o</font></STRONG>
        <td>
        :('b |-> 'c) -> ('a -> 'b) -> ('a |-> 'c)
    <tr><td>
        <STRONG><font color="black">f_o_f</font></STRONG>
        <td>
        :('b |-> 'c) -> ('a |-> 'b) -> ('a |-> 'c)
    <tr><td>
        <STRONG><font color="black">fmap_ABS</font></STRONG>
        <td>
        :('a -> 'b + unit) -> ('a |-> 'b)
    <tr><td>
        <STRONG><font color="black">fmap_REP</font></STRONG>
        <td>
        :('a |-> 'b) -> 'a -> 'b + unit
    <tr><td>
        <STRONG><font color="black">is_fmap</font></STRONG>
        <td>
        :('a -> 'b + unit) -> bool
    <tr><td>
        <STRONG><font color="black">o_f</font></STRONG>
        <td>
        :('b -> 'c) -> ('a |-> 'b) -> ('a |-> 'c)
    
</table>
</center>

<H1><font color="black">Definitions</font></H1>
<DL>
<DT><STRONG><font color="black">FMAP_MAP2_def</font></STRONG>
<DD>
<PRE>
|- !f m. FMAP_MAP2 f m = FUN_FMAP (\x. f (x,m ' x)) (FDOM m)
</PRE>

<DT><STRONG><font color="black">FUPDATE_LIST</font></STRONG>
<DD>
<PRE>
|- $|++ = FOLDL $|+
</PRE>

<DT><STRONG><font color="black">fmap_domsub</font></STRONG>
<DD>
<PRE>
|- !fm k. fm \\ k = DRESTRICT fm (COMPL {k})
</PRE>

<DT><STRONG><font color="black">f_o_DEF</font></STRONG>
<DD>
<PRE>
|- !f g. f f_o g = f f_o_f FUN_FMAP g {x | g x IN FDOM f}
</PRE>

<DT><STRONG><font color="black">FUN_FMAP_DEF</font></STRONG>
<DD>
<PRE>
|- !f P.
     FINITE P ==>
     (FDOM (FUN_FMAP f P) = P) /\ !x. x IN P ==> (FUN_FMAP f P ' x = f x)
</PRE>

<DT><STRONG><font color="black">RRESTRICT_DEF</font></STRONG>
<DD>
<PRE>
|- !f r.
     (FDOM (RRESTRICT f r) = {x | x IN FDOM f /\ f ' x IN r}) /\
     !x.
       RRESTRICT f r ' x =
       if x IN FDOM f /\ f ' x IN r then f ' x else FEMPTY ' x
</PRE>

<DT><STRONG><font color="black">FRANGE_DEF</font></STRONG>
<DD>
<PRE>
|- !f. FRANGE f = {y | ?x. x IN FDOM f /\ (f ' x = y)}
</PRE>

<DT><STRONG><font color="black">o_f_DEF</font></STRONG>
<DD>
<PRE>
|- !f g.
     (FDOM (f o_f g) = FDOM g) /\
     !x. x IN FDOM (f o_f g) ==> ((f o_f g) ' x = f (g ' x))
</PRE>

<DT><STRONG><font color="black">f_o_f_DEF</font></STRONG>
<DD>
<PRE>
|- !f g.
     (FDOM (f f_o_f g) = FDOM g INTER {x | g ' x IN FDOM f}) /\
     !x. x IN FDOM (f f_o_f g) ==> ((f f_o_f g) ' x = f ' (g ' x))
</PRE>

<DT><STRONG><font color="black">FEVERY_DEF</font></STRONG>
<DD>
<PRE>
|- !P f. FEVERY P f <=> !x. x IN FDOM f ==> P (x,f ' x)
</PRE>

<DT><STRONG><font color="black">FLOOKUP_DEF</font></STRONG>
<DD>
<PRE>
|- !f x. FLOOKUP f x = if x IN FDOM f then SOME (f ' x) else NONE
</PRE>

<DT><STRONG><font color="black">FMERGE_DEF</font></STRONG>
<DD>
<PRE>
|- !m f g.
     (FDOM (FMERGE m f g) = FDOM f UNION FDOM g) /\
     !x.
       FMERGE m f g ' x =
       if x NOTIN FDOM f then
         g ' x
       else
         if x NOTIN FDOM g then f ' x else m (f ' x) (g ' x)
</PRE>

<DT><STRONG><font color="black">is_fmap</font></STRONG>
<DD>
<PRE>
|- is_fmap =
   (\a0.
      !is_fmap'.
        (!a0.
           (a0 = (\a. INR ())) \/
           (?f a b.
              (a0 = (\x. if x = a then INL b else f x)) /\ is_fmap' f) ==>
           is_fmap' a0) ==>
        is_fmap' a0)
</PRE>

<DT><STRONG><font color="black">fmap_TY_DEF</font></STRONG>
<DD>
<PRE>
|- ?rep. TYPE_DEFINITION is_fmap rep
</PRE>

<DT><STRONG><font color="black">fmap_ISO_DEF</font></STRONG>
<DD>
<PRE>
|- (!a. fmap_ABS (fmap_REP a) = a) /\
   !r. is_fmap r <=> (fmap_REP (fmap_ABS r) = r)
</PRE>

<DT><STRONG><font color="black">FUPDATE_DEF</font></STRONG>
<DD>
<PRE>
|- !f x y. f |+ (x,y) = fmap_ABS (\a. if a = x then INL y else fmap_REP f a)
</PRE>

<DT><STRONG><font color="black">FEMPTY_DEF</font></STRONG>
<DD>
<PRE>
|- FEMPTY = fmap_ABS (\a. INR ())
</PRE>

<DT><STRONG><font color="black">FAPPLY_DEF</font></STRONG>
<DD>
<PRE>
|- !f x. f ' x = OUTL (fmap_REP f x)
</PRE>

<DT><STRONG><font color="black">FDOM_DEF</font></STRONG>
<DD>
<PRE>
|- !f x. FDOM f x <=> ISL (fmap_REP f x)
</PRE>

<DT><STRONG><font color="black">FCARD_DEF</font></STRONG>
<DD>
<PRE>
|- !fm. FCARD fm = CARD (FDOM fm)
</PRE>

<DT><STRONG><font color="black">SUBMAP_DEF</font></STRONG>
<DD>
<PRE>
|- !f g. f SUBMAP g <=> !x. x IN FDOM f ==> x IN FDOM g /\ (f ' x = g ' x)
</PRE>

<DT><STRONG><font color="black">DRESTRICT_DEF</font></STRONG>
<DD>
<PRE>
|- !f r.
     (FDOM (DRESTRICT f r) = FDOM f INTER r) /\
     !x. DRESTRICT f r ' x = if x IN FDOM f INTER r then f ' x else FEMPTY ' x
</PRE>

<DT><STRONG><font color="black">FUNION_DEF</font></STRONG>
<DD>
<PRE>
|- !f g.
     (FDOM (FUNION f g) = FDOM f UNION FDOM g) /\
     !x. FUNION f g ' x = if x IN FDOM f then f ' x else g ' x
</PRE>

</DL>


<HR>

<HR>
<H1><font color="black">Theorems</font></H1>
<DL>
<DT><STRONG><font color="black">FUNION_ASSOC</font></STRONG>
<DD>
<PRE>
|- !f g h. FUNION f (FUNION g h) = FUNION (FUNION f g) h
</PRE>

<DT><STRONG><font color="black">FUNION_COMM</font></STRONG>
<DD>
<PRE>
|- !f g. DISJOINT (FDOM f) (FDOM g) ==> (FUNION f g = FUNION g f)
</PRE>

<DT><STRONG><font color="black">DOMSUB_FUNION</font></STRONG>
<DD>
<PRE>
|- FUNION f g \\ k = FUNION (f \\ k) (g \\ k)
</PRE>

<DT><STRONG><font color="black">FUNION_EQ_IMPL</font></STRONG>
<DD>
<PRE>
|- !f1 f2 f3.
     DISJOINT (FDOM f1) (FDOM f2) /\ DISJOINT (FDOM f1) (FDOM f3) /\
     (f2 = f3) ==>
     (FUNION f1 f2 = FUNION f1 f3)
</PRE>

<DT><STRONG><font color="black">FUNION_EQ</font></STRONG>
<DD>
<PRE>
|- !f1 f2 f3.
     DISJOINT (FDOM f1) (FDOM f2) /\ DISJOINT (FDOM f1) (FDOM f3) ==>
     ((FUNION f1 f2 = FUNION f1 f3) <=> (f2 = f3))
</PRE>

<DT><STRONG><font color="black">FEMPTY_SUBMAP</font></STRONG>
<DD>
<PRE>
|- !h. h SUBMAP FEMPTY <=> (h = FEMPTY)
</PRE>

<DT><STRONG><font color="black">SUBMAP_FUNION_ID</font></STRONG>
<DD>
<PRE>
|- (!f1 f2. f1 SUBMAP FUNION f1 f2) /\
   !f1 f2. DISJOINT (FDOM f1) (FDOM f2) ==> f2 SUBMAP FUNION f1 f2
</PRE>

<DT><STRONG><font color="black">SUBMAP_FUNION</font></STRONG>
<DD>
<PRE>
|- !f1 f2 f3.
     f1 SUBMAP f2 \/ DISJOINT (FDOM f1) (FDOM f2) /\ f1 SUBMAP f3 ==>
     f1 SUBMAP FUNION f2 f3
</PRE>

<DT><STRONG><font color="black">SUBMAP_FUNION_EQ</font></STRONG>
<DD>
<PRE>
|- (!f1 f2 f3.
      DISJOINT (FDOM f1) (FDOM f2) ==>
      (f1 SUBMAP FUNION f2 f3 <=> f1 SUBMAP f3)) /\
   !f1 f2 f3.
     DISJOINT (FDOM f1) (FDOM f3 DIFF FDOM f2) ==>
     (f1 SUBMAP FUNION f2 f3 <=> f1 SUBMAP f2)
</PRE>

<DT><STRONG><font color="black">FUNION_EQ_FEMPTY</font></STRONG>
<DD>
<PRE>
|- !h1 h2. (FUNION h1 h2 = FEMPTY) <=> (h1 = FEMPTY) /\ (h2 = FEMPTY)
</PRE>

<DT><STRONG><font color="black">FEVERY_DRESTRICT_COMPL</font></STRONG>
<DD>
<PRE>
|- FEVERY P (DRESTRICT (f |+ (k,v)) (COMPL s)) <=>
   (k NOTIN s ==> P (k,v)) /\ FEVERY P (DRESTRICT f (COMPL (k INSERT s)))
</PRE>

<DT><STRONG><font color="black">FUPDATE_ELIM</font></STRONG>
<DD>
<PRE>
|- !k v f. k IN FDOM f /\ (f ' k = v) ==> (f |+ (k,v) = f)
</PRE>

<DT><STRONG><font color="black">FEVERY_STRENGTHEN_THM</font></STRONG>
<DD>
<PRE>
|- FEVERY P FEMPTY /\ (FEVERY P f /\ P (x,y) ==> FEVERY P (f |+ (x,y)))
</PRE>

<DT><STRONG><font color="black">FMAP_MAP2_FUPDATE</font></STRONG>
<DD>
<PRE>
|- FMAP_MAP2 f (m |+ (x,v)) = FMAP_MAP2 f m |+ (x,f (x,v))
</PRE>

<DT><STRONG><font color="black">FMAP_MAP2_FEMPTY</font></STRONG>
<DD>
<PRE>
|- FMAP_MAP2 f FEMPTY = FEMPTY
</PRE>

<DT><STRONG><font color="black">FMAP_MAP2_THM</font></STRONG>
<DD>
<PRE>
|- (FDOM (FMAP_MAP2 f m) = FDOM m) /\
   !x. x IN FDOM m ==> (FMAP_MAP2 f m ' x = f (x,m ' x))
</PRE>

<DT><STRONG><font color="black">FUPDATE_PURGE</font></STRONG>
<DD>
<PRE>
|- !f x y. f |+ (x,y) = f \\ x |+ (x,y)
</PRE>

<DT><STRONG><font color="black">FMEQ_SINGLE_SIMPLE_DISJ_ELIM</font></STRONG>
<DD>
<PRE>
|- !fm k v ck cv.
     (fm |+ (k,v) = FEMPTY |+ (ck,cv)) <=>
     (k = ck) /\ (v = cv) /\ ((fm = FEMPTY) \/ ?v'. fm = FEMPTY |+ (k,v'))
</PRE>

<DT><STRONG><font color="black">FMEQ_SINGLE_SIMPLE_ELIM</font></STRONG>
<DD>
<PRE>
|- !P k v ck cv nv.
     (?fm. (fm |+ (k,v) = FEMPTY |+ (ck,cv)) /\ P (fm |+ (k,nv))) <=>
     (k = ck) /\ (v = cv) /\ P (FEMPTY |+ (ck,nv))
</PRE>

<DT><STRONG><font color="black">FMEQ_ENUMERATE_CASES</font></STRONG>
<DD>
<PRE>
|- !f1 kvl p. (f1 |+ p = FEMPTY |++ kvl) ==> MEM p kvl
</PRE>

<DT><STRONG><font color="black">FUPDATE_LIST_SAME_KEYS_UNWIND</font></STRONG>
<DD>
<PRE>
|- !f1 f2 kvl1 kvl2.
     (f1 |++ kvl1 = f2 |++ kvl2) /\ (MAP FST kvl1 = MAP FST kvl2) /\
     ALL_DISTINCT (MAP FST kvl1) ==>
     (kvl1 = kvl2) /\
     !kvl. (MAP FST kvl = MAP FST kvl1) ==> (f1 |++ kvl = f2 |++ kvl)
</PRE>

<DT><STRONG><font color="black">FUPDATE_LIST_SAME_UPDATE</font></STRONG>
<DD>
<PRE>
|- !kvl f1 f2.
     (f1 |++ kvl = f2 |++ kvl) <=>
     (DRESTRICT f1 (COMPL (LIST_TO_SET (MAP FST kvl))) =
      DRESTRICT f2 (COMPL (LIST_TO_SET (MAP FST kvl))))
</PRE>

<DT><STRONG><font color="black">FDOM_FUPDATE_LIST</font></STRONG>
<DD>
<PRE>
|- !kvl fm. FDOM (fm |++ kvl) = FDOM fm UNION LIST_TO_SET (MAP FST kvl)
</PRE>

<DT><STRONG><font color="black">FUPD11_SAME_UPDATE</font></STRONG>
<DD>
<PRE>
|- !f1 f2 k v.
     (f1 |+ (k,v) = f2 |+ (k,v)) <=>
     (DRESTRICT f1 (COMPL {k}) = DRESTRICT f2 (COMPL {k}))
</PRE>

<DT><STRONG><font color="black">FUPD_SAME_KEY_UNWIND</font></STRONG>
<DD>
<PRE>
|- !f1 f2 k v1 v2.
     (f1 |+ (k,v1) = f2 |+ (k,v2)) ==>
     (v1 = v2) /\ !v. f1 |+ (k,v) = f2 |+ (k,v)
</PRE>

<DT><STRONG><font color="black">FUPD11_SAME_BASE</font></STRONG>
<DD>
<PRE>
|- !f k1 v1 k2 v2.
     (f |+ (k1,v1) = f |+ (k2,v2)) <=>
     (k1 = k2) /\ (v1 = v2) \/
     k1 <> k2 /\ k1 IN FDOM f /\ k2 IN FDOM f /\ (f |+ (k1,v1) = f) /\
     (f |+ (k2,v2) = f)
</PRE>

<DT><STRONG><font color="black">SAME_KEY_UPDATES_DIFFER</font></STRONG>
<DD>
<PRE>
|- !f1 f2 k v1 v2. v1 <> v2 ==> f1 |+ (k,v1) <> f2 |+ (k,v2)
</PRE>

<DT><STRONG><font color="black">FUPD11_SAME_NEW_KEY</font></STRONG>
<DD>
<PRE>
|- !f1 f2 k v1 v2.
     k NOTIN FDOM f1 /\ k NOTIN FDOM f2 ==>
     ((f1 |+ (k,v1) = f2 |+ (k,v2)) <=> (f1 = f2) /\ (v1 = v2))
</PRE>

<DT><STRONG><font color="black">FUPD11_SAME_KEY_AND_BASE</font></STRONG>
<DD>
<PRE>
|- !f k v1 v2. (f |+ (k,v1) = f |+ (k,v2)) <=> (v1 = v2)
</PRE>

<DT><STRONG><font color="black">FUPDATE_LIST_APPLY_NOT_MEM</font></STRONG>
<DD>
<PRE>
|- !kvl f k. ~MEM k (MAP FST kvl) ==> ((f |++ kvl) ' k = f ' k)
</PRE>

<DT><STRONG><font color="black">FUPDATE_LIST_THM</font></STRONG>
<DD>
<PRE>
|- !f. (f |++ [] = f) /\ !h t. f |++ (h::t) = f |+ h |++ t
</PRE>

<DT><STRONG><font color="black">SUBMAP_FUPDATE</font></STRONG>
<DD>
<PRE>
|- !f g x y.
     f |+ (x,y) SUBMAP g <=>
     x IN FDOM g /\ (g ' x = y) /\ f \\ x SUBMAP g \\ x
</PRE>

<DT><STRONG><font color="black">fmap_CASES</font></STRONG>
<DD>
<PRE>
|- !f. (f = FEMPTY) \/ ?g x y. f = g |+ (x,y)
</PRE>

<DT><STRONG><font color="black">DOMSUB_NOT_IN_DOM</font></STRONG>
<DD>
<PRE>
|- k NOTIN FDOM fm ==> (fm \\ k = fm)
</PRE>

<DT><STRONG><font color="black">o_f_FUPDATE</font></STRONG>
<DD>
<PRE>
|- f o_f fm |+ (k,v) = (f o_f fm \\ k) |+ (k,f v)
</PRE>

<DT><STRONG><font color="black">DOMSUB_IDEM</font></STRONG>
<DD>
<PRE>
|- fm \\ k \\ k = fm \\ k
</PRE>

<DT><STRONG><font color="black">o_f_DOMSUB</font></STRONG>
<DD>
<PRE>
|- (g o_f fm) \\ k = g o_f fm \\ k
</PRE>

<DT><STRONG><font color="black">FRANGE_FUPDATE_DOMSUB</font></STRONG>
<DD>
<PRE>
|- !fm k v. FRANGE (fm |+ (k,v)) = v INSERT FRANGE (fm \\ k)
</PRE>

<DT><STRONG><font color="black">DOMSUB_FAPPLY_THM</font></STRONG>
<DD>
<PRE>
|- !fm k1 k2. (fm \\ k1) ' k2 = if k1 = k2 then FEMPTY ' k2 else fm ' k2
</PRE>

<DT><STRONG><font color="black">DOMSUB_FAPPLY_NEQ</font></STRONG>
<DD>
<PRE>
|- !fm k1 k2. k1 <> k2 ==> ((fm \\ k1) ' k2 = fm ' k2)
</PRE>

<DT><STRONG><font color="black">DOMSUB_FAPPLY</font></STRONG>
<DD>
<PRE>
|- !fm k. (fm \\ k) ' k = FEMPTY ' k
</PRE>

<DT><STRONG><font color="black">FDOM_DOMSUB</font></STRONG>
<DD>
<PRE>
|- !fm k. FDOM (fm \\ k) = FDOM fm DELETE k
</PRE>

<DT><STRONG><font color="black">DOMSUB_FUPDATE_THM</font></STRONG>
<DD>
<PRE>
|- !fm k1 k2 v.
     fm |+ (k1,v) \\ k2 = if k1 = k2 then fm \\ k2 else fm \\ k2 |+ (k1,v)
</PRE>

<DT><STRONG><font color="black">DOMSUB_FUPDATE_NEQ</font></STRONG>
<DD>
<PRE>
|- !fm k1 k2 v. k1 <> k2 ==> (fm |+ (k1,v) \\ k2 = fm \\ k2 |+ (k1,v))
</PRE>

<DT><STRONG><font color="black">DOMSUB_FUPDATE</font></STRONG>
<DD>
<PRE>
|- !fm k v. fm |+ (k,v) \\ k = fm \\ k
</PRE>

<DT><STRONG><font color="black">DOMSUB_FEMPTY</font></STRONG>
<DD>
<PRE>
|- !k. FEMPTY \\ k = FEMPTY
</PRE>

<DT><STRONG><font color="black">FINITE_PRED_11</font></STRONG>
<DD>
<PRE>
|- !g. (!x y. (g x = g y) <=> (x = y)) ==> !f. FINITE {x | g x IN FDOM f}
</PRE>

<DT><STRONG><font color="black">FAPPLY_f_o</font></STRONG>
<DD>
<PRE>
|- !f g.
     FINITE {x | g x IN FDOM f} ==>
     !x. x IN FDOM (f f_o g) ==> ((f f_o g) ' x = f ' (g x))
</PRE>

<DT><STRONG><font color="black">FDOM_f_o</font></STRONG>
<DD>
<PRE>
|- !f g. FINITE {x | g x IN FDOM f} ==> (FDOM (f f_o g) = {x | g x IN FDOM f})
</PRE>

<DT><STRONG><font color="black">FRANGE_FMAP</font></STRONG>
<DD>
<PRE>
|- FINITE P ==> (FRANGE (FUN_FMAP f P) = IMAGE f P)
</PRE>

<DT><STRONG><font color="black">FUN_FMAP_EMPTY</font></STRONG>
<DD>
<PRE>
|- FUN_FMAP f {} = FEMPTY
</PRE>

<DT><STRONG><font color="black">RRESTRICT_FUPDATE</font></STRONG>
<DD>
<PRE>
|- !f r x y.
     RRESTRICT (f |+ (x,y)) r =
     if y IN r then
       RRESTRICT f r |+ (x,y)
     else
       RRESTRICT (DRESTRICT f (COMPL {x})) r
</PRE>

<DT><STRONG><font color="black">RRESTRICT_FEMPTY</font></STRONG>
<DD>
<PRE>
|- !r. RRESTRICT FEMPTY r = FEMPTY
</PRE>

<DT><STRONG><font color="black">FINITE_FRANGE</font></STRONG>
<DD>
<PRE>
|- !fm. FINITE (FRANGE fm)
</PRE>

<DT><STRONG><font color="black">SUBMAP_FRANGE</font></STRONG>
<DD>
<PRE>
|- !f g. f SUBMAP g ==> FRANGE f SUBSET FRANGE g
</PRE>

<DT><STRONG><font color="black">FRANGE_FUPDATE</font></STRONG>
<DD>
<PRE>
|- !f x y. FRANGE (f |+ (x,y)) = y INSERT FRANGE (DRESTRICT f (COMPL {x}))
</PRE>

<DT><STRONG><font color="black">FRANGE_FEMPTY</font></STRONG>
<DD>
<PRE>
|- FRANGE FEMPTY = {}
</PRE>

<DT><STRONG><font color="black">o_f_o_f</font></STRONG>
<DD>
<PRE>
|- f o_f (g o_f h) = f o g o_f h
</PRE>

<DT><STRONG><font color="black">FEVERY_o_f</font></STRONG>
<DD>
<PRE>
|- !m P f. FEVERY P (f o_f m) <=> FEVERY (\x. P (FST x,f (SND x))) m
</PRE>

<DT><STRONG><font color="black">o_f_FEMPTY</font></STRONG>
<DD>
<PRE>
|- f o_f FEMPTY = FEMPTY
</PRE>

<DT><STRONG><font color="black">o_f_FAPPLY</font></STRONG>
<DD>
<PRE>
|- !f g x. x IN FDOM g ==> ((f o_f g) ' x = f (g ' x))
</PRE>

<DT><STRONG><font color="black">FDOM_o_f</font></STRONG>
<DD>
<PRE>
|- !f g. FDOM (f o_f g) = FDOM g
</PRE>

<DT><STRONG><font color="black">o_f_FDOM</font></STRONG>
<DD>
<PRE>
|- !f g. FDOM g = FDOM (f o_f g)
</PRE>

<DT><STRONG><font color="black">f_o_f_FEMPTY_2</font></STRONG>
<DD>
<PRE>
|- !f. f f_o_f FEMPTY = FEMPTY
</PRE>

<DT><STRONG><font color="black">f_o_f_FEMPTY_1</font></STRONG>
<DD>
<PRE>
|- !f. FEMPTY f_o_f f = FEMPTY
</PRE>

<DT><STRONG><font color="black">FEVERY_FUPDATE</font></STRONG>
<DD>
<PRE>
|- !P f x y.
     FEVERY P (f |+ (x,y)) <=> P (x,y) /\ FEVERY P (DRESTRICT f (COMPL {x}))
</PRE>

<DT><STRONG><font color="black">FEVERY_FEMPTY</font></STRONG>
<DD>
<PRE>
|- !P. FEVERY P FEMPTY
</PRE>

<DT><STRONG><font color="black">FLOOKUP_UPDATE</font></STRONG>
<DD>
<PRE>
|- FLOOKUP (fm |+ (k1,v)) k2 = if k1 = k2 then SOME v else FLOOKUP fm k2
</PRE>

<DT><STRONG><font color="black">FLOOKUP_EMPTY</font></STRONG>
<DD>
<PRE>
|- FLOOKUP FEMPTY k = NONE
</PRE>

<DT><STRONG><font color="black">FMERGE_EQ_FEMPTY</font></STRONG>
<DD>
<PRE>
|- (FMERGE m f g = FEMPTY) <=> (f = FEMPTY) /\ (g = FEMPTY)
</PRE>

<DT><STRONG><font color="black">FMERGE_DRESTRICT</font></STRONG>
<DD>
<PRE>
|- DRESTRICT (FMERGE f st1 st2) vs =
   FMERGE f (DRESTRICT st1 vs) (DRESTRICT st2 vs)
</PRE>

<DT><STRONG><font color="black">FMERGE_ASSOC</font></STRONG>
<DD>
<PRE>
|- ASSOC (FMERGE m) <=> ASSOC m
</PRE>

<DT><STRONG><font color="black">FMERGE_COMM</font></STRONG>
<DD>
<PRE>
|- COMM (FMERGE m) <=> COMM m
</PRE>

<DT><STRONG><font color="black">FMERGE_NO_CHANGE</font></STRONG>
<DD>
<PRE>
|- ((FMERGE m f1 f2 = f1) <=>
    !x. x IN FDOM f2 ==> x IN FDOM f1 /\ (m (f1 ' x) (f2 ' x) = f1 ' x)) /\
   ((FMERGE m f1 f2 = f2) <=>
    !x. x IN FDOM f1 ==> x IN FDOM f2 /\ (m (f1 ' x) (f2 ' x) = f2 ' x))
</PRE>

<DT><STRONG><font color="black">FUNION_FMERGE</font></STRONG>
<DD>
<PRE>
|- !f1 f2 m. DISJOINT (FDOM f1) (FDOM f2) ==> (FMERGE m f1 f2 = FUNION f1 f2)
</PRE>

<DT><STRONG><font color="black">FMERGE_FUNION</font></STRONG>
<DD>
<PRE>
|- FUNION = FMERGE (\x y. x)
</PRE>

<DT><STRONG><font color="black">FMERGE_FEMPTY</font></STRONG>
<DD>
<PRE>
|- (FMERGE m f FEMPTY = f) /\ (FMERGE m FEMPTY f = f)
</PRE>

<DT><STRONG><font color="black">is_fmap_rules</font></STRONG>
<DD>
<PRE>
|- is_fmap (\a. INR ()) /\
   !f a b. is_fmap f ==> is_fmap (\x. if x = a then INL b else f x)
</PRE>

<DT><STRONG><font color="black">is_fmap_ind</font></STRONG>
<DD>
<PRE>
|- !is_fmap'.
     is_fmap' (\a. INR ()) /\
     (!f a b. is_fmap' f ==> is_fmap' (\x. if x = a then INL b else f x)) ==>
     !a0. is_fmap a0 ==> is_fmap' a0
</PRE>

<DT><STRONG><font color="black">is_fmap_cases</font></STRONG>
<DD>
<PRE>
|- !a0.
     is_fmap a0 <=>
     (a0 = (\a. INR ())) \/
     ?f a b. (a0 = (\x. if x = a then INL b else f x)) /\ is_fmap f
</PRE>

<DT><STRONG><font color="black">FAPPLY_FUPDATE</font></STRONG>
<DD>
<PRE>
|- !f x y. (f |+ (x,y)) ' x = y
</PRE>

<DT><STRONG><font color="black">NOT_EQ_FAPPLY</font></STRONG>
<DD>
<PRE>
|- !f a x y. a <> x ==> ((f |+ (x,y)) ' a = f ' a)
</PRE>

<DT><STRONG><font color="black">FUPDATE_COMMUTES</font></STRONG>
<DD>
<PRE>
|- !f a b c d. a <> c ==> (f |+ (a,b) |+ (c,d) = f |+ (c,d) |+ (a,b))
</PRE>

<DT><STRONG><font color="black">FUPDATE_EQ</font></STRONG>
<DD>
<PRE>
|- !f a b c. f |+ (a,b) |+ (a,c) = f |+ (a,c)
</PRE>

<DT><STRONG><font color="black">FDOM_FEMPTY</font></STRONG>
<DD>
<PRE>
|- FDOM FEMPTY = {}
</PRE>

<DT><STRONG><font color="black">FDOM_FUPDATE</font></STRONG>
<DD>
<PRE>
|- !f a b. FDOM (f |+ (a,b)) = a INSERT FDOM f
</PRE>

<DT><STRONG><font color="black">FAPPLY_FUPDATE_THM</font></STRONG>
<DD>
<PRE>
|- !f a b x. (f |+ (a,b)) ' x = if x = a then b else f ' x
</PRE>

<DT><STRONG><font color="black">NOT_EQ_FEMPTY_FUPDATE</font></STRONG>
<DD>
<PRE>
|- !f a b. FEMPTY <> f |+ (a,b)
</PRE>

<DT><STRONG><font color="black">FDOM_EQ_FDOM_FUPDATE</font></STRONG>
<DD>
<PRE>
|- !f x. x IN FDOM f ==> !y. FDOM (f |+ (x,y)) = FDOM f
</PRE>

<DT><STRONG><font color="black">fmap_SIMPLE_INDUCT</font></STRONG>
<DD>
<PRE>
|- !P. P FEMPTY /\ (!f. P f ==> !x y. P (f |+ (x,y))) ==> !f. P f
</PRE>

<DT><STRONG><font color="black">FDOM_EQ_EMPTY</font></STRONG>
<DD>
<PRE>
|- !f. (FDOM f = {}) <=> (f = FEMPTY)
</PRE>

<DT><STRONG><font color="black">FDOM_F_FEMPTY1</font></STRONG>
<DD>
<PRE>
|- !f. (!a. a NOTIN FDOM f) <=> (f = FEMPTY)
</PRE>

<DT><STRONG><font color="black">FDOM_FINITE</font></STRONG>
<DD>
<PRE>
|- !fm. FINITE (FDOM fm)
</PRE>

<DT><STRONG><font color="black">FCARD_FEMPTY</font></STRONG>
<DD>
<PRE>
|- FCARD FEMPTY = 0
</PRE>

<DT><STRONG><font color="black">FCARD_FUPDATE</font></STRONG>
<DD>
<PRE>
|- !fm a b.
     FCARD (fm |+ (a,b)) = if a IN FDOM fm then FCARD fm else 1 + FCARD fm
</PRE>

<DT><STRONG><font color="black">FCARD_0_FEMPTY</font></STRONG>
<DD>
<PRE>
|- !f. (FCARD f = 0) <=> (f = FEMPTY)
</PRE>

<DT><STRONG><font color="black">FCARD_SUC</font></STRONG>
<DD>
<PRE>
|- !f n.
     (FCARD f = SUC n) <=>
     ?f' x y. x NOTIN FDOM f' /\ (FCARD f' = n) /\ (f = f' |+ (x,y))
</PRE>

<DT><STRONG><font color="black">fmap_INDUCT</font></STRONG>
<DD>
<PRE>
|- !P.
     P FEMPTY /\ (!f. P f ==> !x y. x NOTIN FDOM f ==> P (f |+ (x,y))) ==>
     !f. P f
</PRE>

<DT><STRONG><font color="black">FM_PULL_APART</font></STRONG>
<DD>
<PRE>
|- !fm k. k IN FDOM fm ==> ?fm0 v. (fm = fm0 |+ (k,v)) /\ k NOTIN FDOM fm0
</PRE>

<DT><STRONG><font color="black">NOT_FDOM_FAPPLY_FEMPTY</font></STRONG>
<DD>
<PRE>
|- !f x. x NOTIN FDOM f ==> (f ' x = FEMPTY ' x)
</PRE>

<DT><STRONG><font color="black">fmap_EQ</font></STRONG>
<DD>
<PRE>
|- !f g. (FDOM f = FDOM g) /\ ($' f = $' g) <=> (f = g)
</PRE>

<DT><STRONG><font color="black">fmap_EQ_THM</font></STRONG>
<DD>
<PRE>
|- !f g.
     (FDOM f = FDOM g) /\ (!x. x IN FDOM f ==> (f ' x = g ' x)) <=> (f = g)
</PRE>

<DT><STRONG><font color="black">fmap_EXT</font></STRONG>
<DD>
<PRE>
|- !f g. (f = g) <=> (FDOM f = FDOM g) /\ !x. x IN FDOM f ==> (f ' x = g ' x)
</PRE>

<DT><STRONG><font color="black">SUBMAP_FEMPTY</font></STRONG>
<DD>
<PRE>
|- !f. FEMPTY SUBMAP f
</PRE>

<DT><STRONG><font color="black">SUBMAP_REFL</font></STRONG>
<DD>
<PRE>
|- !f. f SUBMAP f
</PRE>

<DT><STRONG><font color="black">SUBMAP_ANTISYM</font></STRONG>
<DD>
<PRE>
|- !f g. f SUBMAP g /\ g SUBMAP f <=> (f = g)
</PRE>

<DT><STRONG><font color="black">SUBMAP_TRANS</font></STRONG>
<DD>
<PRE>
|- !f g h. f SUBMAP g /\ g SUBMAP h ==> f SUBMAP h
</PRE>

<DT><STRONG><font color="black">DRESTRICT_FEMPTY</font></STRONG>
<DD>
<PRE>
|- !r. DRESTRICT FEMPTY r = FEMPTY
</PRE>

<DT><STRONG><font color="black">DRESTRICT_FUPDATE</font></STRONG>
<DD>
<PRE>
|- !f r x y.
     DRESTRICT (f |+ (x,y)) r =
     if x IN r then DRESTRICT f r |+ (x,y) else DRESTRICT f r
</PRE>

<DT><STRONG><font color="black">STRONG_DRESTRICT_FUPDATE</font></STRONG>
<DD>
<PRE>
|- !f r x y.
     x IN r ==> (DRESTRICT (f |+ (x,y)) r = DRESTRICT f (r DELETE x) |+ (x,y))
</PRE>

<DT><STRONG><font color="black">FDOM_DRESTRICT</font></STRONG>
<DD>
<PRE>
|- !f r x. FDOM (DRESTRICT f r) = FDOM f INTER r
</PRE>

<DT><STRONG><font color="black">NOT_FDOM_DRESTRICT</font></STRONG>
<DD>
<PRE>
|- !f x. x NOTIN FDOM f ==> (DRESTRICT f (COMPL {x}) = f)
</PRE>

<DT><STRONG><font color="black">DRESTRICT_SUBMAP</font></STRONG>
<DD>
<PRE>
|- !f r. DRESTRICT f r SUBMAP f
</PRE>

<DT><STRONG><font color="black">DRESTRICT_DRESTRICT</font></STRONG>
<DD>
<PRE>
|- !f P Q. DRESTRICT (DRESTRICT f P) Q = DRESTRICT f (P INTER Q)
</PRE>

<DT><STRONG><font color="black">DRESTRICT_IS_FEMPTY</font></STRONG>
<DD>
<PRE>
|- !f. DRESTRICT f {} = FEMPTY
</PRE>

<DT><STRONG><font color="black">FUPDATE_DRESTRICT</font></STRONG>
<DD>
<PRE>
|- !f x y. f |+ (x,y) = DRESTRICT f (COMPL {x}) |+ (x,y)
</PRE>

<DT><STRONG><font color="black">STRONG_DRESTRICT_FUPDATE_THM</font></STRONG>
<DD>
<PRE>
|- !f r x y.
     DRESTRICT (f |+ (x,y)) r =
     if x IN r then
       DRESTRICT f (COMPL {x} INTER r) |+ (x,y)
     else
       DRESTRICT f (COMPL {x} INTER r)
</PRE>

<DT><STRONG><font color="black">DRESTRICT_UNIV</font></STRONG>
<DD>
<PRE>
|- !f. DRESTRICT f UNIV = f
</PRE>

<DT><STRONG><font color="black">FUNION_FEMPTY_1</font></STRONG>
<DD>
<PRE>
|- !g. FUNION FEMPTY g = g
</PRE>

<DT><STRONG><font color="black">FUNION_FEMPTY_2</font></STRONG>
<DD>
<PRE>
|- !f. FUNION f FEMPTY = f
</PRE>

<DT><STRONG><font color="black">FUNION_FUPDATE_1</font></STRONG>
<DD>
<PRE>
|- !f g x y. FUNION (f |+ (x,y)) g = FUNION f g |+ (x,y)
</PRE>

<DT><STRONG><font color="black">FUNION_FUPDATE_2</font></STRONG>
<DD>
<PRE>
|- !f g x y.
     FUNION f (g |+ (x,y)) =
     if x IN FDOM f then FUNION f g else FUNION f g |+ (x,y)
</PRE>

<DT><STRONG><font color="black">FDOM_FUNION</font></STRONG>
<DD>
<PRE>
|- !f g x. FDOM (FUNION f g) = FDOM f UNION FDOM g
</PRE>

<DT><STRONG><font color="black">DRESTRICT_FUNION</font></STRONG>
<DD>
<PRE>
|- !h s1 s2.
     FUNION (DRESTRICT h s1) (DRESTRICT h s2) = DRESTRICT h (s1 UNION s2)
</PRE>

<DT><STRONG><font color="black">DRESTRICT_EQ_FUNION</font></STRONG>
<DD>
<PRE>
|- !h h1 h2.
     DISJOINT (FDOM h1) (FDOM h2) /\ (FUNION h1 h2 = h) ==>
     (h2 = DRESTRICT h (COMPL (FDOM h1)))
</PRE>

<DT><STRONG><font color="black">IN_FDOM_FOLDR_UNION</font></STRONG>
<DD>
<PRE>
|- !x hL. x IN FDOM (FOLDR FUNION FEMPTY hL) <=> ?h. MEM h hL /\ x IN FDOM h
</PRE>

<DT><STRONG><font color="black">DRESTRICT_FUNION_DRESTRICT_COMPL</font></STRONG>
<DD>
<PRE>
|- FUNION (DRESTRICT f s) (DRESTRICT f (COMPL s)) = f
</PRE>

<DT><STRONG><font color="black">DRESTRICT_IDEMPOT</font></STRONG>
<DD>
<PRE>
|- !s vs. DRESTRICT (DRESTRICT s vs) vs = DRESTRICT s vs
</PRE>

</DL>



<HR>
</BODY>
</HTML>

<HTML>
<head><link rel="icon" href="../../../images/logo.ico" type="image/vnd.microsoft.icon"><TITLE>Theory: Coder</TITLE><meta http-equiv="content-type" content="text/html;charset=UTF-8">
</HEAD>
<BODY bgcolor=linen text=midnightblue>
<H1><font color="black">Theory "Coder"</font></H1>
<STRONG><font size=+3 color="black">Parents</font></STRONG>&nbsp;&nbsp;&nbsp;&nbsp;
    <A HREF = "DecodeTheory.html"><STRONG><font color="black">Decode</font></STRONG></A>

<H1><font color="black">Signature</font></H1>
<center>
<table BORDER=4 CELLPADDING=10 CELLSPACING=1>

    <tr>
    <th>
    <font color="crimson">Constant</font>
    <th>
    <font color="crimson">Type</font><tr><td>
                                         <STRONG><font color="black">blist_coder</font></STRONG>
                                         <td>
                                         :num ->
                                          ('a -> bool) #
                                          ('b -> 'c list) #
                                          (bool list ->
                                           ('a # bool list) option) ->
                                          ('a list -> bool) #
                                          ('b list -> 'c list) #
                                          (bool list ->
                                           ('a list # bool list) option)
    <tr><td>
        <STRONG><font color="black">bnum_coder</font></STRONG>
        <td>
        :num ->
         (num -> bool) ->
         (num -> bool) #
         (num -> bool list) # (bool list -> (num # bool list) option)
    <tr><td>
        <STRONG><font color="black">bool_coder</font></STRONG>
        <td>
        :(bool -> bool) ->
         (bool -> bool) #
         (bool -> bool list) # (bool list -> (bool # bool list) option)
    <tr><td>
        <STRONG><font color="black">decode</font></STRONG>
        <td>
        :('a -> bool) ->
         (bool list -> ('a # bool list) option) -> bool list -> 'a
    <tr><td>
        <STRONG><font color="black">decoder</font></STRONG>
        <td>
        :('a -> bool) #
         ('a -> bool list) # (bool list -> ('a # bool list) option) ->
         bool list -> 'a
    <tr><td>
        <STRONG><font color="black">domain</font></STRONG>
        <td>
        :('a -> bool) #
         ('a -> bool list) # (bool list -> ('a # bool list) option) ->
         'a -> bool
    <tr><td>
        <STRONG><font color="black">encoder</font></STRONG>
        <td>
        :('a -> bool) #
         ('a -> bool list) # (bool list -> ('a # bool list) option) ->
         'a -> bool list
    <tr><td>
        <STRONG><font color="black">list_coder</font></STRONG>
        <td>
        :('a -> bool) #
         ('b -> bool list) # (bool list -> ('a # bool list) option) ->
         ('a list -> bool) #
         ('b list -> bool list) # (bool list -> ('a list # bool list) option)
    <tr><td>
        <STRONG><font color="black">num_coder</font></STRONG>
        <td>
        :(num -> bool) ->
         (num -> bool) #
         (num -> bool list) # (bool list -> (num # bool list) option)
    <tr><td>
        <STRONG><font color="black">option_coder</font></STRONG>
        <td>
        :('a -> bool) #
         ('b -> bool list) # (bool list -> ('a # bool list) option) ->
         ('a option -> bool) #
         ('b option -> bool list) #
         (bool list -> ('a option # bool list) option)
    <tr><td>
        <STRONG><font color="black">prod_coder</font></STRONG>
        <td>
        :('a -> bool) #
         ('c -> bool list) # (bool list -> ('a # bool list) option) ->
         ('b -> bool) #
         ('d -> bool list) # (bool list -> ('b # bool list) option) ->
         ('a # 'b -> bool) #
         ('c # 'd -> bool list) #
         (bool list -> (('a # 'b) # bool list) option)
    <tr><td>
        <STRONG><font color="black">sum_coder</font></STRONG>
        <td>
        :('a -> bool) #
         ('c -> bool list) # (bool list -> ('a # bool list) option) ->
         ('b -> bool) #
         ('d -> bool list) # (bool list -> ('b # bool list) option) ->
         ('a + 'b -> bool) #
         ('c + 'd -> bool list) #
         (bool list -> (('a + 'b) # bool list) option)
    <tr><td>
        <STRONG><font color="black">tree_coder</font></STRONG>
        <td>
        :('a -> bool) #
         ('b -> bool list) # (bool list -> ('a # bool list) option) ->
         ('a tree -> bool) #
         ('b tree -> bool list) # (bool list -> ('a tree # bool list) option)
    <tr><td>
        <STRONG><font color="black">unit_coder</font></STRONG>
        <td>
        :(unit -> bool) ->
         (unit -> bool) #
         (unit -> bool list) # (bool list -> (unit # bool list) option)
    <tr><td>
        <STRONG><font color="black">wf_coder</font></STRONG>
        <td>
        :('a -> bool) #
         ('a -> bool list) # (bool list -> ('a # bool list) option) -> bool
    
</table>
</center>

<H1><font color="black">Definitions</font></H1>
<DL>
<DT><STRONG><font color="black">decode_def</font></STRONG>
<DD>
<PRE>
|- !p d l. decode p d l = case d l of NONE -> (@x. p x) || SOME (x,v2) -> x
</PRE>

<DT><STRONG><font color="black">wf_coder_def</font></STRONG>
<DD>
<PRE>
|- !p e d.
     wf_coder (p,e,d) <=> wf_pred p /\ wf_encoder p e /\ (d = enc2dec p e)
</PRE>

<DT><STRONG><font color="black">domain_def</font></STRONG>
<DD>
<PRE>
|- !p e d. domain (p,e,d) = p
</PRE>

<DT><STRONG><font color="black">encoder_def</font></STRONG>
<DD>
<PRE>
|- !p e d. encoder (p,e,d) = e
</PRE>

<DT><STRONG><font color="black">decoder_def</font></STRONG>
<DD>
<PRE>
|- !p e d. decoder (p,e,d) = decode p d
</PRE>

<DT><STRONG><font color="black">unit_coder_def</font></STRONG>
<DD>
<PRE>
|- !p. unit_coder p = (p,encode_unit,decode_unit p)
</PRE>

<DT><STRONG><font color="black">bool_coder_def</font></STRONG>
<DD>
<PRE>
|- !p. bool_coder p = (p,encode_bool,decode_bool p)
</PRE>

<DT><STRONG><font color="black">prod_coder_def</font></STRONG>
<DD>
<PRE>
|- !p1 e1 d1 p2 e2 d2.
     prod_coder (p1,e1,d1) (p2,e2,d2) =
     (lift_prod p1 p2,encode_prod e1 e2,decode_prod (lift_prod p1 p2) d1 d2)
</PRE>

<DT><STRONG><font color="black">sum_coder_def</font></STRONG>
<DD>
<PRE>
|- !p1 e1 d1 p2 e2 d2.
     sum_coder (p1,e1,d1) (p2,e2,d2) =
     (lift_sum p1 p2,encode_sum e1 e2,decode_sum (lift_sum p1 p2) d1 d2)
</PRE>

<DT><STRONG><font color="black">option_coder_def</font></STRONG>
<DD>
<PRE>
|- !p e d.
     option_coder (p,e,d) =
     (lift_option p,encode_option e,decode_option (lift_option p) d)
</PRE>

<DT><STRONG><font color="black">list_coder_def</font></STRONG>
<DD>
<PRE>
|- !p e d.
     list_coder (p,e,d) = (EVERY p,encode_list e,decode_list (EVERY p) d)
</PRE>

<DT><STRONG><font color="black">blist_coder_def</font></STRONG>
<DD>
<PRE>
|- !m p e d.
     blist_coder m (p,e,d) =
     (lift_blist m p,encode_blist m e,decode_blist (lift_blist m p) m d)
</PRE>

<DT><STRONG><font color="black">num_coder_def</font></STRONG>
<DD>
<PRE>
|- !p. num_coder p = (p,encode_num,decode_num p)
</PRE>

<DT><STRONG><font color="black">bnum_coder_def</font></STRONG>
<DD>
<PRE>
|- !m p. bnum_coder m p = (p,encode_bnum m,decode_bnum m p)
</PRE>

<DT><STRONG><font color="black">tree_coder_def</font></STRONG>
<DD>
<PRE>
|- !p e d.
     tree_coder (p,e,d) =
     (lift_tree p,encode_tree e,decode_tree (lift_tree p) d)
</PRE>

</DL>


<HR>

<HR>
<H1><font color="black">Theorems</font></H1>
<DL>
<DT><STRONG><font color="black">decode_encode</font></STRONG>
<DD>
<PRE>
|- !p e x. wf_encoder p e /\ p x ==> (decode p (enc2dec p e) (e x) = x)
</PRE>

<DT><STRONG><font color="black">wf_coder</font></STRONG>
<DD>
<PRE>
|- !c. wf_coder c ==> !x. domain c x ==> (decoder c (encoder c x) = x)
</PRE>

<DT><STRONG><font color="black">wf_coder_closed</font></STRONG>
<DD>
<PRE>
|- !c. wf_coder c ==> !l. domain c (decoder c l)
</PRE>

<DT><STRONG><font color="black">wf_coder_op</font></STRONG>
<DD>
<PRE>
|- !p e f.
     (?x. p x) /\ wf_encoder p e /\ (!x. p x ==> (e x = f x)) ==>
     wf_coder (p,e,enc2dec p f)
</PRE>

<DT><STRONG><font color="black">wf_coder_unit</font></STRONG>
<DD>
<PRE>
|- !p. wf_pred p ==> wf_coder (unit_coder p)
</PRE>

<DT><STRONG><font color="black">wf_coder_bool</font></STRONG>
<DD>
<PRE>
|- !p. wf_pred p ==> wf_coder (bool_coder p)
</PRE>

<DT><STRONG><font color="black">wf_coder_prod</font></STRONG>
<DD>
<PRE>
|- !c1 c2. wf_coder c1 /\ wf_coder c2 ==> wf_coder (prod_coder c1 c2)
</PRE>

<DT><STRONG><font color="black">wf_coder_sum</font></STRONG>
<DD>
<PRE>
|- !c1 c2. wf_coder c1 /\ wf_coder c2 ==> wf_coder (sum_coder c1 c2)
</PRE>

<DT><STRONG><font color="black">wf_coder_option</font></STRONG>
<DD>
<PRE>
|- !c. wf_coder c ==> wf_coder (option_coder c)
</PRE>

<DT><STRONG><font color="black">wf_coder_list</font></STRONG>
<DD>
<PRE>
|- !c. wf_coder c ==> wf_coder (list_coder c)
</PRE>

<DT><STRONG><font color="black">wf_coder_blist</font></STRONG>
<DD>
<PRE>
|- !m c. wf_coder c ==> wf_coder (blist_coder m c)
</PRE>

<DT><STRONG><font color="black">wf_coder_num</font></STRONG>
<DD>
<PRE>
|- !p. wf_pred p ==> wf_coder (num_coder p)
</PRE>

<DT><STRONG><font color="black">wf_coder_bnum</font></STRONG>
<DD>
<PRE>
|- !m p. wf_pred_bnum m p ==> wf_coder (bnum_coder m p)
</PRE>

<DT><STRONG><font color="black">wf_coder_tree</font></STRONG>
<DD>
<PRE>
|- !c. wf_coder c ==> wf_coder (tree_coder c)
</PRE>

</DL>



<HR>
</BODY>
</HTML>
